"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/v1";
exports.ids = ["pages/api/v1"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_v1_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\v1.ts */ \"(api)/./pages/api/v1.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_v1_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_v1_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/v1\",\n        pathname: \"/api/v1\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_v1_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnYxJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUN2MS50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNnRDtBQUNoRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsNkNBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDZDQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2p1c3R3aHl1cy1hc3Nlc3NtZW50Lz9iYTBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcdjEudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92MVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3YxXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\n/**\n * Global is used here to maintain a cached connection across hot reloads\n * in development. This prevents connections growing exponentially\n * during API Route usage.\n */ let cached = globalThis.mongoose;\nif (!cached) {\n    cached = globalThis.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n            maxPoolSize: 10\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQTs7OztDQUlDLEdBQ0QsSUFBSUMsU0FBUyxXQUFvQkwsUUFBUTtBQUV6QyxJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBUyxXQUFvQkwsUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3RFO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7WUFDaEJDLGFBQWE7UUFDZjtRQUVBUCxPQUFPRyxPQUFPLEdBQUdSLHVEQUFnQixDQUFDQyxhQUFjUyxNQUFNSSxJQUFJLENBQUMsQ0FBQ2Q7WUFDMUQsT0FBT0E7UUFDVDtJQUNGO0lBRUEsSUFBSTtRQUNGSyxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztJQUNwQyxFQUFFLE9BQU9PLEdBQUc7UUFDVlYsT0FBT0csT0FBTyxHQUFHO1FBQ2pCLE1BQU1PO0lBQ1I7SUFFQSxPQUFPVixPQUFPRSxJQUFJO0FBQ3BCO0FBRUEsaUVBQWVFLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qdXN0d2h5dXMtYXNzZXNzbWVudC8uL2xpYi9tb25nb2RiLnRzPzA1YmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJyk7XG59XG5cbi8qKlxuICogR2xvYmFsIGlzIHVzZWQgaGVyZSB0byBtYWludGFpbiBhIGNhY2hlZCBjb25uZWN0aW9uIGFjcm9zcyBob3QgcmVsb2Fkc1xuICogaW4gZGV2ZWxvcG1lbnQuIFRoaXMgcHJldmVudHMgY29ubmVjdGlvbnMgZ3Jvd2luZyBleHBvbmVudGlhbGx5XG4gKiBkdXJpbmcgQVBJIFJvdXRlIHVzYWdlLlxuICovXG5sZXQgY2FjaGVkID0gKGdsb2JhbFRoaXMgYXMgYW55KS5tb25nb29zZTtcblxuaWYgKCFjYWNoZWQpIHtcbiAgY2FjaGVkID0gKGdsb2JhbFRoaXMgYXMgYW55KS5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ubjtcbiAgfVxuXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxuICAgICAgbWF4UG9vbFNpemU6IDEwLFxuICAgIH07XG5cbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkkhLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xuICAgICAgcmV0dXJuIG1vbmdvb3NlO1xuICAgIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xuICAgIHRocm93IGU7XG4gIH1cblxuICByZXR1cm4gY2FjaGVkLmNvbm47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdDsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbFRoaXMiLCJjb25uIiwicHJvbWlzZSIsImRiQ29ubmVjdCIsIm9wdHMiLCJidWZmZXJDb21tYW5kcyIsIm1heFBvb2xTaXplIiwiY29ubmVjdCIsInRoZW4iLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.ts\n");

/***/ }),

/***/ "(api)/./models/Schema.ts":
/*!**************************!*\
  !*** ./models/Schema.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Answer: () => (/* binding */ Answer),\n/* harmony export */   Log: () => (/* binding */ Log),\n/* harmony export */   Session: () => (/* binding */ Session),\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    _id: {\n        type: String,\n        required: true\n    },\n    name: String,\n    pin: String,\n    role: String,\n    language: String,\n    createdAt: Date\n});\nconst SessionSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    currentSection: {\n        type: String,\n        default: \"Mindset\"\n    },\n    currentIndex: {\n        type: Number,\n        default: 0\n    },\n    startedAt: {\n        type: Number,\n        default: Date.now\n    },\n    lastActiveAt: {\n        type: Number,\n        default: Date.now\n    },\n    totalTimeSpent: {\n        type: Number,\n        default: 0\n    },\n    isCompleted: {\n        type: Boolean,\n        default: false\n    },\n    completedAt: Number,\n    // Analytics\n    loginCount: {\n        type: Number,\n        default: 1\n    },\n    backtrackCount: {\n        type: Number,\n        default: 0\n    },\n    blurCount: {\n        type: Number,\n        default: 0\n    },\n    sectionTimes: {\n        Mindset: {\n            type: Number,\n            default: 0\n        },\n        Skills: {\n            type: Number,\n            default: 0\n        },\n        Values: {\n            type: Number,\n            default: 0\n        },\n        \"Logic & Reasoning\": {\n            type: Number,\n            default: 0\n        }\n    }\n});\nconst AnswerSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: String,\n        required: true\n    },\n    questionId: {\n        type: Number,\n        required: true\n    },\n    section: String,\n    answerText: String,\n    timeSpent: Number,\n    updatedAt: {\n        type: Number,\n        default: Date.now\n    }\n});\n// Composite index for quick lookups\nAnswerSchema.index({\n    userId: 1,\n    questionId: 1\n}, {\n    unique: true\n});\nconst LogSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    id: String,\n    userId: String,\n    action: String,\n    timestamp: Number,\n    metadata: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed\n});\n// Helper to prevent strict type union errors in Next.js builds with Mongoose\n// Casting to Model<any> ensures TS sees a single compatible signature\nconst User = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.User || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"User\", UserSchema);\nconst Session = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Session || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Session\", SessionSchema);\nconst Answer = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Answer || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Answer\", AnswerSchema);\nconst Log = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Log || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Log\", LogSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvU2NoZW1hLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRTtBQUVsRSxNQUFNRyxhQUFhLElBQUlILDRDQUFNQSxDQUFDO0lBQzVCSSxLQUFLO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNwQ0MsTUFBTUY7SUFDTkcsS0FBS0g7SUFDTEksTUFBTUo7SUFDTkssVUFBVUw7SUFDVk0sV0FBV0M7QUFDYjtBQUVBLE1BQU1DLGdCQUFnQixJQUFJZCw0Q0FBTUEsQ0FBQztJQUMvQmUsUUFBUTtRQUFFVixNQUFNQztRQUFRQyxVQUFVO1FBQU1TLFFBQVE7SUFBSztJQUNyREMsZ0JBQWdCO1FBQUVaLE1BQU1DO1FBQVFZLFNBQVM7SUFBVTtJQUNuREMsY0FBYztRQUFFZCxNQUFNZTtRQUFRRixTQUFTO0lBQUU7SUFDekNHLFdBQVc7UUFBRWhCLE1BQU1lO1FBQVFGLFNBQVNMLEtBQUtTLEdBQUc7SUFBQztJQUM3Q0MsY0FBYztRQUFFbEIsTUFBTWU7UUFBUUYsU0FBU0wsS0FBS1MsR0FBRztJQUFDO0lBQ2hERSxnQkFBZ0I7UUFBRW5CLE1BQU1lO1FBQVFGLFNBQVM7SUFBRTtJQUMzQ08sYUFBYTtRQUFFcEIsTUFBTXFCO1FBQVNSLFNBQVM7SUFBTTtJQUM3Q1MsYUFBYVA7SUFFYixZQUFZO0lBQ1pRLFlBQVk7UUFBRXZCLE1BQU1lO1FBQVFGLFNBQVM7SUFBRTtJQUN2Q1csZ0JBQWdCO1FBQUV4QixNQUFNZTtRQUFRRixTQUFTO0lBQUU7SUFDM0NZLFdBQVc7UUFBRXpCLE1BQU1lO1FBQVFGLFNBQVM7SUFBRTtJQUN0Q2EsY0FBYztRQUNaQyxTQUFTO1lBQUUzQixNQUFNZTtZQUFRRixTQUFTO1FBQUU7UUFDcENlLFFBQVE7WUFBRTVCLE1BQU1lO1lBQVFGLFNBQVM7UUFBRTtRQUNuQ2dCLFFBQVE7WUFBRTdCLE1BQU1lO1lBQVFGLFNBQVM7UUFBRTtRQUNuQyxxQkFBcUI7WUFBRWIsTUFBTWU7WUFBUUYsU0FBUztRQUFFO0lBQ2xEO0FBQ0Y7QUFFQSxNQUFNaUIsZUFBZSxJQUFJbkMsNENBQU1BLENBQUM7SUFDOUJlLFFBQVE7UUFBRVYsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3ZDNkIsWUFBWTtRQUFFL0IsTUFBTWU7UUFBUWIsVUFBVTtJQUFLO0lBQzNDOEIsU0FBUy9CO0lBQ1RnQyxZQUFZaEM7SUFDWmlDLFdBQVduQjtJQUNYb0IsV0FBVztRQUFFbkMsTUFBTWU7UUFBUUYsU0FBU0wsS0FBS1MsR0FBRztJQUFDO0FBQy9DO0FBRUEsb0NBQW9DO0FBQ3BDYSxhQUFhTSxLQUFLLENBQUM7SUFBRTFCLFFBQVE7SUFBR3FCLFlBQVk7QUFBRSxHQUFHO0lBQUVwQixRQUFRO0FBQUs7QUFFaEUsTUFBTTBCLFlBQVksSUFBSTFDLDRDQUFNQSxDQUFDO0lBQzNCMkMsSUFBSXJDO0lBQ0pTLFFBQVFUO0lBQ1JzQyxRQUFRdEM7SUFDUnVDLFdBQVd6QjtJQUNYMEIsVUFBVTlDLDRDQUFNQSxDQUFDK0MsS0FBSyxDQUFDQyxLQUFLO0FBQzlCO0FBRUEsNkVBQTZFO0FBQzdFLHNFQUFzRTtBQUMvRCxNQUFNQyxPQUFRL0MsNENBQU1BLENBQUMrQyxJQUFJLElBQUloRCwrQ0FBS0EsQ0FBQyxRQUFRRSxZQUEyQjtBQUN0RSxNQUFNK0MsVUFBV2hELDRDQUFNQSxDQUFDZ0QsT0FBTyxJQUFJakQsK0NBQUtBLENBQUMsV0FBV2EsZUFBOEI7QUFDbEYsTUFBTXFDLFNBQVVqRCw0Q0FBTUEsQ0FBQ2lELE1BQU0sSUFBSWxELCtDQUFLQSxDQUFDLFVBQVVrQyxjQUE2QjtBQUM5RSxNQUFNaUIsTUFBT2xELDRDQUFNQSxDQUFDa0QsR0FBRyxJQUFJbkQsK0NBQUtBLENBQUMsT0FBT3lDLFdBQTBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanVzdHdoeXVzLWFzc2Vzc21lbnQvLi9tb2RlbHMvU2NoZW1hLnRzPzM3N2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSwgbW9kZWwsIG1vZGVscywgTW9kZWwgfSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IFVzZXJTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgX2lkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSwgLy8gTWFudWFsbHkgc2V0IHRvIG1hdGNoIFVTRVJTIGNvbnN0YW50IElEc1xuICBuYW1lOiBTdHJpbmcsXG4gIHBpbjogU3RyaW5nLFxuICByb2xlOiBTdHJpbmcsXG4gIGxhbmd1YWdlOiBTdHJpbmcsXG4gIGNyZWF0ZWRBdDogRGF0ZVxufSk7XG5cbmNvbnN0IFNlc3Npb25TY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgdXNlcklkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxuICBjdXJyZW50U2VjdGlvbjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdNaW5kc2V0JyB9LFxuICBjdXJyZW50SW5kZXg6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHN0YXJ0ZWRBdDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IERhdGUubm93IH0sXG4gIGxhc3RBY3RpdmVBdDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IERhdGUubm93IH0sXG4gIHRvdGFsVGltZVNwZW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICBpc0NvbXBsZXRlZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICBjb21wbGV0ZWRBdDogTnVtYmVyLFxuXG4gIC8vIEFuYWx5dGljc1xuICBsb2dpbkNvdW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMSB9LFxuICBiYWNrdHJhY2tDb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgYmx1ckNvdW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LCAvLyBEaXN0cmFjdGlvbiB0cmFja2luZ1xuICBzZWN0aW9uVGltZXM6IHtcbiAgICBNaW5kc2V0OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICAgIFNraWxsczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgICBWYWx1ZXM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gICAgJ0xvZ2ljICYgUmVhc29uaW5nJzogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfVxuICB9XG59KTtcblxuY29uc3QgQW5zd2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHVzZXJJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHF1ZXN0aW9uSWQ6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBzZWN0aW9uOiBTdHJpbmcsXG4gIGFuc3dlclRleHQ6IFN0cmluZyxcbiAgdGltZVNwZW50OiBOdW1iZXIsXG4gIHVwZGF0ZWRBdDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IERhdGUubm93IH1cbn0pO1xuXG4vLyBDb21wb3NpdGUgaW5kZXggZm9yIHF1aWNrIGxvb2t1cHNcbkFuc3dlclNjaGVtYS5pbmRleCh7IHVzZXJJZDogMSwgcXVlc3Rpb25JZDogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcblxuY29uc3QgTG9nU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGlkOiBTdHJpbmcsXG4gIHVzZXJJZDogU3RyaW5nLFxuICBhY3Rpb246IFN0cmluZyxcbiAgdGltZXN0YW1wOiBOdW1iZXIsXG4gIG1ldGFkYXRhOiBTY2hlbWEuVHlwZXMuTWl4ZWRcbn0pO1xuXG4vLyBIZWxwZXIgdG8gcHJldmVudCBzdHJpY3QgdHlwZSB1bmlvbiBlcnJvcnMgaW4gTmV4dC5qcyBidWlsZHMgd2l0aCBNb25nb29zZVxuLy8gQ2FzdGluZyB0byBNb2RlbDxhbnk+IGVuc3VyZXMgVFMgc2VlcyBhIHNpbmdsZSBjb21wYXRpYmxlIHNpZ25hdHVyZVxuZXhwb3J0IGNvbnN0IFVzZXIgPSAobW9kZWxzLlVzZXIgfHwgbW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKSkgYXMgTW9kZWw8YW55PjtcbmV4cG9ydCBjb25zdCBTZXNzaW9uID0gKG1vZGVscy5TZXNzaW9uIHx8IG1vZGVsKCdTZXNzaW9uJywgU2Vzc2lvblNjaGVtYSkpIGFzIE1vZGVsPGFueT47XG5leHBvcnQgY29uc3QgQW5zd2VyID0gKG1vZGVscy5BbnN3ZXIgfHwgbW9kZWwoJ0Fuc3dlcicsIEFuc3dlclNjaGVtYSkpIGFzIE1vZGVsPGFueT47XG5leHBvcnQgY29uc3QgTG9nID0gKG1vZGVscy5Mb2cgfHwgbW9kZWwoJ0xvZycsIExvZ1NjaGVtYSkpIGFzIE1vZGVsPGFueT47Il0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vZGVsIiwibW9kZWxzIiwiVXNlclNjaGVtYSIsIl9pZCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm5hbWUiLCJwaW4iLCJyb2xlIiwibGFuZ3VhZ2UiLCJjcmVhdGVkQXQiLCJEYXRlIiwiU2Vzc2lvblNjaGVtYSIsInVzZXJJZCIsInVuaXF1ZSIsImN1cnJlbnRTZWN0aW9uIiwiZGVmYXVsdCIsImN1cnJlbnRJbmRleCIsIk51bWJlciIsInN0YXJ0ZWRBdCIsIm5vdyIsImxhc3RBY3RpdmVBdCIsInRvdGFsVGltZVNwZW50IiwiaXNDb21wbGV0ZWQiLCJCb29sZWFuIiwiY29tcGxldGVkQXQiLCJsb2dpbkNvdW50IiwiYmFja3RyYWNrQ291bnQiLCJibHVyQ291bnQiLCJzZWN0aW9uVGltZXMiLCJNaW5kc2V0IiwiU2tpbGxzIiwiVmFsdWVzIiwiQW5zd2VyU2NoZW1hIiwicXVlc3Rpb25JZCIsInNlY3Rpb24iLCJhbnN3ZXJUZXh0IiwidGltZVNwZW50IiwidXBkYXRlZEF0IiwiaW5kZXgiLCJMb2dTY2hlbWEiLCJpZCIsImFjdGlvbiIsInRpbWVzdGFtcCIsIm1ldGFkYXRhIiwiVHlwZXMiLCJNaXhlZCIsIlVzZXIiLCJTZXNzaW9uIiwiQW5zd2VyIiwiTG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/Schema.ts\n");

/***/ }),

/***/ "(api)/./pages/api/v1.ts":
/*!*************************!*\
  !*** ./pages/api/v1.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/mongodb */ \"(api)/./lib/mongodb.ts\");\n/* harmony import */ var _models_Schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../models/Schema */ \"(api)/./models/Schema.ts\");\n\n\n// Secure User List (Server-Side Only)\nconst SECURE_USERS = [\n    {\n        id: \"u1\",\n        name: \"Mahmoud\",\n        pin: \"77337733w\",\n        role: \"USER\"\n    },\n    {\n        id: \"u2\",\n        name: \"Ismail\",\n        pin: \"77002887p\",\n        role: \"USER\"\n    },\n    {\n        id: \"u3\",\n        name: \"Ayoub\",\n        pin: \"00229900e\",\n        role: \"USER\"\n    },\n    {\n        id: \"nizar\",\n        name: \"Nizar\",\n        pin: \"88994411n\",\n        role: \"USER\"\n    },\n    {\n        id: \"abdu\",\n        name: \"Abdu\",\n        pin: \"11223344a\",\n        role: \"USER\"\n    }\n];\n// Populate Users if they don't exist (Seed)\nasync function ensureUsers() {\n    for (const u of SECURE_USERS){\n        const exists = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.findById(u.id);\n        if (!exists) {\n            await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.create({\n                _id: u.id,\n                ...u,\n                createdAt: new Date()\n            });\n        }\n    }\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).end();\n    try {\n        // 1. Database Connection with Timeout\n        console.log(\"Connecting to DB...\");\n        await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n        // 2. Extract Data\n        const { action, payload, secret } = req.body;\n        if (!action) return res.status(400).json({\n            error: \"Missing action\"\n        });\n        console.log(`API Action: ${action}`);\n        // 3. Security Check\n        const adminActions = [\n            \"admin_stats\",\n            \"admin_reset\",\n            \"admin_reset_system\",\n            \"admin_get_answers\",\n            \"admin_export\"\n        ];\n        if (adminActions.includes(action)) {\n            const envSecret = process.env.ADMIN_SECRET_KEY;\n            const fallbackSecret = \"bS%83B4+4uAO-#&&UyK;H+\";\n            if (secret !== envSecret && secret !== fallbackSecret) {\n                return res.status(401).json({\n                    error: \"Unauthorized\"\n                });\n            }\n        }\n        // 4. Seeding Check (Only on login or admin to save performance)\n        if (action === \"login_user\" || action === \"admin_stats\") {\n            await ensureUsers();\n        }\n        switch(action){\n            case \"login_user\":\n                {\n                    const { userId, pin } = payload;\n                    const user = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.findById(userId);\n                    if (user && user.pin === pin) {\n                        const session = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOne({\n                            userId\n                        });\n                        const hasProgress = !!(session && !session.isCompleted && (session.currentIndex > 0 || session.totalTimeSpent > 0));\n                        const userObj = user.toObject();\n                        delete userObj.pin;\n                        return res.json({\n                            success: true,\n                            user: userObj,\n                            hasProgress\n                        });\n                    }\n                    return res.status(401).json({\n                        error: \"Invalid PIN\"\n                    });\n                }\n            case \"get_user_data\":\n                {\n                    const { userId } = payload;\n                    const user = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.findById(userId);\n                    const session = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOne({\n                        userId\n                    });\n                    const answers = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.find({\n                        userId\n                    });\n                    return res.json({\n                        user,\n                        session,\n                        answers\n                    });\n                }\n            case \"start_session\":\n                {\n                    const { userId } = payload;\n                    let session = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOne({\n                        userId\n                    });\n                    if (!session) {\n                        session = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.create({\n                            userId\n                        });\n                        await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.create({\n                            userId,\n                            action: \"LOGIN\",\n                            timestamp: Date.now(),\n                            metadata: {\n                                type: \"new\"\n                            }\n                        });\n                    } else {\n                        session.lastActiveAt = Date.now();\n                        session.loginCount = (session.loginCount || 0) + 1;\n                        await session.save();\n                        await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.create({\n                            userId,\n                            action: \"RESUME\",\n                            timestamp: Date.now(),\n                            metadata: {\n                                type: \"existing\",\n                                count: session.loginCount\n                            }\n                        });\n                    }\n                    return res.json(session);\n                }\n            case \"update_language\":\n                {\n                    const { userId, language } = payload;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.findByIdAndUpdate(userId, {\n                        language\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"save_progress\":\n                {\n                    const { userId, questionId, section, answerText, timeSpent, currentIndex } = payload;\n                    // Atomic update of session progress and timer\n                    const updateObj = {\n                        currentIndex,\n                        lastActiveAt: Date.now()\n                    };\n                    // Increment time for the section\n                    const sectionField = `sectionTimes.${section}`;\n                    const incObj = {\n                        totalTimeSpent: timeSpent\n                    };\n                    if (section) incObj[sectionField] = timeSpent;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOneAndUpdate({\n                        userId\n                    }, {\n                        $set: updateObj,\n                        $inc: incObj\n                    }, {\n                        upsert: true\n                    });\n                    // Save or update answer\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.findOneAndUpdate({\n                        userId,\n                        questionId\n                    }, {\n                        section,\n                        answerText,\n                        $inc: {\n                            timeSpent\n                        },\n                        updatedAt: Date.now()\n                    }, {\n                        upsert: true\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"log_event\":\n                {\n                    const { userId, event } = payload; // 'backtrack' or 'blur'\n                    const field = event === \"backtrack\" ? \"backtrackCount\" : \"blurCount\";\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOneAndUpdate({\n                        userId\n                    }, {\n                        $inc: {\n                            [field]: 1\n                        }\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"heartbeat\":\n                {\n                    const { userId } = payload;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOneAndUpdate({\n                        userId\n                    }, {\n                        lastActiveAt: Date.now()\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"complete_session\":\n                {\n                    const { userId } = payload;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOneAndUpdate({\n                        userId\n                    }, {\n                        isCompleted: true,\n                        completedAt: Date.now()\n                    });\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.create({\n                        userId,\n                        action: \"COMPLETE\",\n                        timestamp: Date.now()\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            // --- Admin Actions ---\n            case \"admin_stats\":\n                {\n                    const users = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.find({\n                        role: \"USER\"\n                    });\n                    const sessions = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.find({});\n                    const answers = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.find({});\n                    const stats = users.map((u)=>{\n                        const s = sessions.find((sess)=>sess.userId === u.id) || null;\n                        const aCount = answers.filter((ans)=>ans.userId === u.id).length;\n                        const isOnline = s ? Date.now() - s.lastActiveAt < 30000 : false;\n                        return {\n                            user: u,\n                            session: s,\n                            answerCount: aCount,\n                            isOnline\n                        };\n                    });\n                    return res.json(stats);\n                }\n            case \"admin_get_answers\":\n                {\n                    const { userId } = payload;\n                    const answers = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.find({\n                        userId\n                    }).sort({\n                        questionId: 1\n                    });\n                    return res.json(answers);\n                }\n            case \"admin_reset\":\n                {\n                    const { targetUserId } = payload;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.deleteOne({\n                        userId: targetUserId\n                    });\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.deleteMany({\n                        userId: targetUserId\n                    });\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.deleteOne({\n                        _id: targetUserId\n                    });\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.create({\n                        userId: \"ADMIN\",\n                        action: \"ADMIN_RESET\",\n                        timestamp: Date.now(),\n                        metadata: {\n                            targetUserId\n                        }\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"admin_reset_system\":\n                {\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.deleteMany({});\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.deleteMany({});\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.deleteMany({});\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.deleteMany({\n                        role: \"USER\"\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"admin_export\":\n                {\n                    const users = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.find({});\n                    const sessions = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.find({});\n                    const answers = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.find({});\n                    const logs = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.find({});\n                    return res.json({\n                        users,\n                        sessions,\n                        answers,\n                        logs\n                    });\n                }\n            default:\n                return res.status(400).json({\n                    error: \"Unknown action\"\n                });\n        }\n    } catch (err) {\n        console.error(\"CRITICAL API ERROR:\", err);\n        return res.status(500).json({\n            error: \"Internal Server Error\",\n            details: err.message,\n            stack:  true ? err.stack : 0\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdjEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQzBDO0FBQ3VCO0FBR2pFLHNDQUFzQztBQUN0QyxNQUFNSyxlQUFlO0lBQ25CO1FBQUVDLElBQUk7UUFBTUMsTUFBTTtRQUFXQyxLQUFLO1FBQWFDLE1BQU07SUFBTztJQUM1RDtRQUFFSCxJQUFJO1FBQU1DLE1BQU07UUFBVUMsS0FBSztRQUFhQyxNQUFNO0lBQU87SUFDM0Q7UUFBRUgsSUFBSTtRQUFNQyxNQUFNO1FBQVNDLEtBQUs7UUFBYUMsTUFBTTtJQUFPO0lBQzFEO1FBQUVILElBQUk7UUFBU0MsTUFBTTtRQUFTQyxLQUFLO1FBQWFDLE1BQU07SUFBTztJQUM3RDtRQUFFSCxJQUFJO1FBQVFDLE1BQU07UUFBUUMsS0FBSztRQUFhQyxNQUFNO0lBQU87Q0FDNUQ7QUFFRCw0Q0FBNEM7QUFDNUMsZUFBZUM7SUFDYixLQUFLLE1BQU1DLEtBQUtOLGFBQWM7UUFDNUIsTUFBTU8sU0FBUyxNQUFNUixnREFBSUEsQ0FBQ1MsUUFBUSxDQUFDRixFQUFFTCxFQUFFO1FBQ3ZDLElBQUksQ0FBQ00sUUFBUTtZQUNYLE1BQU1SLGdEQUFJQSxDQUFDVSxNQUFNLENBQUM7Z0JBQUVDLEtBQUtKLEVBQUVMLEVBQUU7Z0JBQUUsR0FBR0ssQ0FBQztnQkFBRUssV0FBVyxJQUFJQztZQUFPO1FBQzdEO0lBQ0Y7QUFDRjtBQUVlLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxHQUFHO0lBRXJELElBQUk7UUFDRixzQ0FBc0M7UUFDdENDLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE1BQU16Qix3REFBU0E7UUFFZixrQkFBa0I7UUFDbEIsTUFBTSxFQUFFMEIsTUFBTSxFQUFFQyxPQUFPLEVBQUVDLE1BQU0sRUFBRSxHQUFHVCxJQUFJVSxJQUFJO1FBQzVDLElBQUksQ0FBQ0gsUUFBUSxPQUFPTixJQUFJRSxNQUFNLENBQUMsS0FBS1EsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBaUI7UUFFbkVQLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLFlBQVksRUFBRUMsT0FBTyxDQUFDO1FBRW5DLG9CQUFvQjtRQUNwQixNQUFNTSxlQUFlO1lBQUM7WUFBZTtZQUFlO1lBQXNCO1lBQXFCO1NBQWU7UUFDOUcsSUFBSUEsYUFBYUMsUUFBUSxDQUFDUCxTQUFTO1lBQ2pDLE1BQU1RLFlBQVlDLFFBQVFDLEdBQUcsQ0FBQ0MsZ0JBQWdCO1lBQzlDLE1BQU1DLGlCQUFpQjtZQUN2QixJQUFJVixXQUFXTSxhQUFhTixXQUFXVSxnQkFBZ0I7Z0JBQ3JELE9BQU9sQixJQUFJRSxNQUFNLENBQUMsS0FBS1EsSUFBSSxDQUFDO29CQUFFQyxPQUFPO2dCQUFlO1lBQ3REO1FBQ0Y7UUFFQSxnRUFBZ0U7UUFDaEUsSUFBSUwsV0FBVyxnQkFBZ0JBLFdBQVcsZUFBZTtZQUN2RCxNQUFNaEI7UUFDUjtRQUVBLE9BQVFnQjtZQUNOLEtBQUs7Z0JBQWM7b0JBQ2pCLE1BQU0sRUFBRWEsTUFBTSxFQUFFL0IsR0FBRyxFQUFFLEdBQUdtQjtvQkFDeEIsTUFBTWEsT0FBTyxNQUFNcEMsZ0RBQUlBLENBQUNTLFFBQVEsQ0FBQzBCO29CQUVqQyxJQUFJQyxRQUFRQSxLQUFLaEMsR0FBRyxLQUFLQSxLQUFLO3dCQUM1QixNQUFNaUMsVUFBVSxNQUFNeEMsbURBQU9BLENBQUN5QyxPQUFPLENBQUM7NEJBQUVIO3dCQUFPO3dCQUMvQyxNQUFNSSxjQUFjLENBQUMsQ0FBRUYsQ0FBQUEsV0FBVyxDQUFDQSxRQUFRRyxXQUFXLElBQUtILENBQUFBLFFBQVFJLFlBQVksR0FBRyxLQUFLSixRQUFRSyxjQUFjLEdBQUcsRUFBQzt3QkFFakgsTUFBTUMsVUFBVVAsS0FBS1EsUUFBUTt3QkFDN0IsT0FBT0QsUUFBUXZDLEdBQUc7d0JBQ2xCLE9BQU9ZLElBQUlVLElBQUksQ0FBQzs0QkFBRW1CLFNBQVM7NEJBQU1ULE1BQU1POzRCQUFTSjt3QkFBWTtvQkFDOUQ7b0JBQ0EsT0FBT3ZCLElBQUlFLE1BQU0sQ0FBQyxLQUFLUSxJQUFJLENBQUM7d0JBQUVDLE9BQU87b0JBQWM7Z0JBQ3JEO1lBRUEsS0FBSztnQkFBaUI7b0JBQ3BCLE1BQU0sRUFBRVEsTUFBTSxFQUFFLEdBQUdaO29CQUNuQixNQUFNYSxPQUFPLE1BQU1wQyxnREFBSUEsQ0FBQ1MsUUFBUSxDQUFDMEI7b0JBQ2pDLE1BQU1FLFVBQVUsTUFBTXhDLG1EQUFPQSxDQUFDeUMsT0FBTyxDQUFDO3dCQUFFSDtvQkFBTztvQkFDL0MsTUFBTVcsVUFBVSxNQUFNaEQsa0RBQU1BLENBQUNpRCxJQUFJLENBQUM7d0JBQUVaO29CQUFPO29CQUMzQyxPQUFPbkIsSUFBSVUsSUFBSSxDQUFDO3dCQUFFVTt3QkFBTUM7d0JBQVNTO29CQUFRO2dCQUMzQztZQUVBLEtBQUs7Z0JBQWlCO29CQUNwQixNQUFNLEVBQUVYLE1BQU0sRUFBRSxHQUFHWjtvQkFDbkIsSUFBSWMsVUFBVSxNQUFNeEMsbURBQU9BLENBQUN5QyxPQUFPLENBQUM7d0JBQUVIO29CQUFPO29CQUM3QyxJQUFJLENBQUNFLFNBQVM7d0JBQ1pBLFVBQVUsTUFBTXhDLG1EQUFPQSxDQUFDYSxNQUFNLENBQUM7NEJBQUV5Qjt3QkFBTzt3QkFDeEMsTUFBTXBDLCtDQUFHQSxDQUFDVyxNQUFNLENBQUM7NEJBQ2Z5Qjs0QkFBUWIsUUFBUTs0QkFBUzBCLFdBQVduQyxLQUFLb0MsR0FBRzs0QkFBSUMsVUFBVTtnQ0FBRUMsTUFBTTs0QkFBTTt3QkFDMUU7b0JBQ0YsT0FBTzt3QkFDTGQsUUFBUWUsWUFBWSxHQUFHdkMsS0FBS29DLEdBQUc7d0JBQy9CWixRQUFRZ0IsVUFBVSxHQUFHLENBQUNoQixRQUFRZ0IsVUFBVSxJQUFJLEtBQUs7d0JBQ2pELE1BQU1oQixRQUFRaUIsSUFBSTt3QkFDbEIsTUFBTXZELCtDQUFHQSxDQUFDVyxNQUFNLENBQUM7NEJBQ2Z5Qjs0QkFBUWIsUUFBUTs0QkFBVTBCLFdBQVduQyxLQUFLb0MsR0FBRzs0QkFBSUMsVUFBVTtnQ0FBRUMsTUFBTTtnQ0FBWUksT0FBT2xCLFFBQVFnQixVQUFVOzRCQUFDO3dCQUMzRztvQkFDRjtvQkFDQSxPQUFPckMsSUFBSVUsSUFBSSxDQUFDVztnQkFDbEI7WUFFQSxLQUFLO2dCQUFtQjtvQkFDdEIsTUFBTSxFQUFFRixNQUFNLEVBQUVxQixRQUFRLEVBQUUsR0FBR2pDO29CQUM3QixNQUFNdkIsZ0RBQUlBLENBQUN5RCxpQkFBaUIsQ0FBQ3RCLFFBQVE7d0JBQUVxQjtvQkFBUztvQkFDaEQsT0FBT3hDLElBQUlVLElBQUksQ0FBQzt3QkFBRW1CLFNBQVM7b0JBQUs7Z0JBQ2xDO1lBRUEsS0FBSztnQkFBaUI7b0JBQ3BCLE1BQU0sRUFBRVYsTUFBTSxFQUFFdUIsVUFBVSxFQUFFQyxPQUFPLEVBQUVDLFVBQVUsRUFBRUMsU0FBUyxFQUFFcEIsWUFBWSxFQUFFLEdBQUdsQjtvQkFFN0UsOENBQThDO29CQUM5QyxNQUFNdUMsWUFBaUI7d0JBQ3JCckI7d0JBQ0FXLGNBQWN2QyxLQUFLb0MsR0FBRztvQkFDeEI7b0JBRUEsaUNBQWlDO29CQUNqQyxNQUFNYyxlQUFlLENBQUMsYUFBYSxFQUFFSixRQUFRLENBQUM7b0JBQzlDLE1BQU1LLFNBQWM7d0JBQUV0QixnQkFBZ0JtQjtvQkFBVTtvQkFDaEQsSUFBSUYsU0FBU0ssTUFBTSxDQUFDRCxhQUFhLEdBQUdGO29CQUVwQyxNQUFNaEUsbURBQU9BLENBQUNvRSxnQkFBZ0IsQ0FDNUI7d0JBQUU5QjtvQkFBTyxHQUNUO3dCQUFFK0IsTUFBTUo7d0JBQVdLLE1BQU1IO29CQUFPLEdBQ2hDO3dCQUFFSSxRQUFRO29CQUFLO29CQUdqQix3QkFBd0I7b0JBQ3hCLE1BQU10RSxrREFBTUEsQ0FBQ21FLGdCQUFnQixDQUMzQjt3QkFBRTlCO3dCQUFRdUI7b0JBQVcsR0FDckI7d0JBQUVDO3dCQUFTQzt3QkFBWU8sTUFBTTs0QkFBRU47d0JBQVU7d0JBQUdRLFdBQVd4RCxLQUFLb0MsR0FBRztvQkFBRyxHQUNsRTt3QkFBRW1CLFFBQVE7b0JBQUs7b0JBR2pCLE9BQU9wRCxJQUFJVSxJQUFJLENBQUM7d0JBQUVtQixTQUFTO29CQUFLO2dCQUNsQztZQUVBLEtBQUs7Z0JBQWE7b0JBQ2hCLE1BQU0sRUFBRVYsTUFBTSxFQUFFbUMsS0FBSyxFQUFFLEdBQUcvQyxTQUFTLHdCQUF3QjtvQkFDM0QsTUFBTWdELFFBQVFELFVBQVUsY0FBYyxtQkFBbUI7b0JBQ3pELE1BQU16RSxtREFBT0EsQ0FBQ29FLGdCQUFnQixDQUFDO3dCQUFFOUI7b0JBQU8sR0FBRzt3QkFBRWdDLE1BQU07NEJBQUUsQ0FBQ0ksTUFBTSxFQUFFO3dCQUFFO29CQUFFO29CQUNsRSxPQUFPdkQsSUFBSVUsSUFBSSxDQUFDO3dCQUFFbUIsU0FBUztvQkFBSztnQkFDbEM7WUFFQSxLQUFLO2dCQUFhO29CQUNoQixNQUFNLEVBQUVWLE1BQU0sRUFBRSxHQUFHWjtvQkFDbkIsTUFBTTFCLG1EQUFPQSxDQUFDb0UsZ0JBQWdCLENBQUM7d0JBQUU5QjtvQkFBTyxHQUFHO3dCQUFFaUIsY0FBY3ZDLEtBQUtvQyxHQUFHO29CQUFHO29CQUN0RSxPQUFPakMsSUFBSVUsSUFBSSxDQUFDO3dCQUFFbUIsU0FBUztvQkFBSztnQkFDbEM7WUFFQSxLQUFLO2dCQUFvQjtvQkFDdkIsTUFBTSxFQUFFVixNQUFNLEVBQUUsR0FBR1o7b0JBQ25CLE1BQU0xQixtREFBT0EsQ0FBQ29FLGdCQUFnQixDQUFDO3dCQUFFOUI7b0JBQU8sR0FBRzt3QkFBRUssYUFBYTt3QkFBTWdDLGFBQWEzRCxLQUFLb0MsR0FBRztvQkFBRztvQkFDeEYsTUFBTWxELCtDQUFHQSxDQUFDVyxNQUFNLENBQUM7d0JBQUV5Qjt3QkFBUWIsUUFBUTt3QkFBWTBCLFdBQVduQyxLQUFLb0MsR0FBRztvQkFBRztvQkFDckUsT0FBT2pDLElBQUlVLElBQUksQ0FBQzt3QkFBRW1CLFNBQVM7b0JBQUs7Z0JBQ2xDO1lBRUEsd0JBQXdCO1lBRXhCLEtBQUs7Z0JBQWU7b0JBQ2xCLE1BQU00QixRQUFRLE1BQU16RSxnREFBSUEsQ0FBQytDLElBQUksQ0FBQzt3QkFBRTFDLE1BQU07b0JBQU87b0JBQzdDLE1BQU1xRSxXQUFXLE1BQU03RSxtREFBT0EsQ0FBQ2tELElBQUksQ0FBQyxDQUFDO29CQUNyQyxNQUFNRCxVQUFVLE1BQU1oRCxrREFBTUEsQ0FBQ2lELElBQUksQ0FBQyxDQUFDO29CQUVuQyxNQUFNNEIsUUFBUUYsTUFBTUcsR0FBRyxDQUFDckUsQ0FBQUE7d0JBQ3RCLE1BQU1zRSxJQUFJSCxTQUFTM0IsSUFBSSxDQUFDK0IsQ0FBQUEsT0FBUUEsS0FBSzNDLE1BQU0sS0FBSzVCLEVBQUVMLEVBQUUsS0FBSzt3QkFDekQsTUFBTTZFLFNBQVNqQyxRQUFRa0MsTUFBTSxDQUFDQyxDQUFBQSxNQUFPQSxJQUFJOUMsTUFBTSxLQUFLNUIsRUFBRUwsRUFBRSxFQUFFZ0YsTUFBTTt3QkFDaEUsTUFBTUMsV0FBV04sSUFBS2hFLEtBQUtvQyxHQUFHLEtBQUs0QixFQUFFekIsWUFBWSxHQUFHLFFBQVM7d0JBQzdELE9BQU87NEJBQUVoQixNQUFNN0I7NEJBQUc4QixTQUFTd0M7NEJBQUdPLGFBQWFMOzRCQUFRSTt3QkFBUztvQkFDOUQ7b0JBRUEsT0FBT25FLElBQUlVLElBQUksQ0FBQ2lEO2dCQUNsQjtZQUVBLEtBQUs7Z0JBQXFCO29CQUN4QixNQUFNLEVBQUV4QyxNQUFNLEVBQUUsR0FBR1o7b0JBQ25CLE1BQU11QixVQUFVLE1BQU1oRCxrREFBTUEsQ0FBQ2lELElBQUksQ0FBQzt3QkFBRVo7b0JBQU8sR0FBR2tELElBQUksQ0FBQzt3QkFBRTNCLFlBQVk7b0JBQUU7b0JBQ25FLE9BQU8xQyxJQUFJVSxJQUFJLENBQUNvQjtnQkFDbEI7WUFFQSxLQUFLO2dCQUFlO29CQUNsQixNQUFNLEVBQUV3QyxZQUFZLEVBQUUsR0FBRy9EO29CQUN6QixNQUFNMUIsbURBQU9BLENBQUMwRixTQUFTLENBQUM7d0JBQUVwRCxRQUFRbUQ7b0JBQWE7b0JBQy9DLE1BQU14RixrREFBTUEsQ0FBQzBGLFVBQVUsQ0FBQzt3QkFBRXJELFFBQVFtRDtvQkFBYTtvQkFDL0MsTUFBTXRGLGdEQUFJQSxDQUFDdUYsU0FBUyxDQUFDO3dCQUFFNUUsS0FBSzJFO29CQUFhO29CQUN6QyxNQUFNdkYsK0NBQUdBLENBQUNXLE1BQU0sQ0FBQzt3QkFBRXlCLFFBQVE7d0JBQVNiLFFBQVE7d0JBQWUwQixXQUFXbkMsS0FBS29DLEdBQUc7d0JBQUlDLFVBQVU7NEJBQUVvQzt3QkFBYTtvQkFBRTtvQkFDN0csT0FBT3RFLElBQUlVLElBQUksQ0FBQzt3QkFBRW1CLFNBQVM7b0JBQUs7Z0JBQ2xDO1lBRUEsS0FBSztnQkFBc0I7b0JBQ3pCLE1BQU1oRCxtREFBT0EsQ0FBQzJGLFVBQVUsQ0FBQyxDQUFDO29CQUMxQixNQUFNMUYsa0RBQU1BLENBQUMwRixVQUFVLENBQUMsQ0FBQztvQkFDekIsTUFBTXpGLCtDQUFHQSxDQUFDeUYsVUFBVSxDQUFDLENBQUM7b0JBQ3RCLE1BQU14RixnREFBSUEsQ0FBQ3dGLFVBQVUsQ0FBQzt3QkFBRW5GLE1BQU07b0JBQU87b0JBQ3JDLE9BQU9XLElBQUlVLElBQUksQ0FBQzt3QkFBRW1CLFNBQVM7b0JBQUs7Z0JBQ2xDO1lBRUEsS0FBSztnQkFBZ0I7b0JBQ25CLE1BQU00QixRQUFRLE1BQU16RSxnREFBSUEsQ0FBQytDLElBQUksQ0FBQyxDQUFDO29CQUMvQixNQUFNMkIsV0FBVyxNQUFNN0UsbURBQU9BLENBQUNrRCxJQUFJLENBQUMsQ0FBQztvQkFDckMsTUFBTUQsVUFBVSxNQUFNaEQsa0RBQU1BLENBQUNpRCxJQUFJLENBQUMsQ0FBQztvQkFDbkMsTUFBTTBDLE9BQU8sTUFBTTFGLCtDQUFHQSxDQUFDZ0QsSUFBSSxDQUFDLENBQUM7b0JBQzdCLE9BQU8vQixJQUFJVSxJQUFJLENBQUM7d0JBQUUrQzt3QkFBT0M7d0JBQVU1Qjt3QkFBUzJDO29CQUFLO2dCQUNuRDtZQUVBO2dCQUNFLE9BQU96RSxJQUFJRSxNQUFNLENBQUMsS0FBS1EsSUFBSSxDQUFDO29CQUFFQyxPQUFPO2dCQUFpQjtRQUMxRDtJQUNGLEVBQUUsT0FBTytELEtBQVU7UUFDakJ0RSxRQUFRTyxLQUFLLENBQUMsdUJBQXVCK0Q7UUFDckMsT0FBTzFFLElBQUlFLE1BQU0sQ0FBQyxLQUFLUSxJQUFJLENBQUM7WUFDMUJDLE9BQU87WUFDUGdFLFNBQVNELElBQUlFLE9BQU87WUFDcEJDLE9BQU85RCxLQUF5QixHQUFnQjJELElBQUlHLEtBQUssR0FBR0MsQ0FBU0E7UUFDdkU7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanVzdHdoeXVzLWFzc2Vzc21lbnQvLi9wYWdlcy9hcGkvdjEudHM/NDY5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCBkYkNvbm5lY3QgZnJvbSAnLi4vLi4vbGliL21vbmdvZGInO1xuaW1wb3J0IHsgU2Vzc2lvbiwgQW5zd2VyLCBMb2csIFVzZXIgfSBmcm9tICcuLi8uLi9tb2RlbHMvU2NoZW1hJztcbmltcG9ydCB7IFVTRVJTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzJztcblxuLy8gU2VjdXJlIFVzZXIgTGlzdCAoU2VydmVyLVNpZGUgT25seSlcbmNvbnN0IFNFQ1VSRV9VU0VSUyA9IFtcbiAgeyBpZDogJ3UxJywgbmFtZTogJ01haG1vdWQnLCBwaW46ICc3NzMzNzczM3cnLCByb2xlOiAnVVNFUicgfSxcbiAgeyBpZDogJ3UyJywgbmFtZTogJ0lzbWFpbCcsIHBpbjogJzc3MDAyODg3cCcsIHJvbGU6ICdVU0VSJyB9LFxuICB7IGlkOiAndTMnLCBuYW1lOiAnQXlvdWInLCBwaW46ICcwMDIyOTkwMGUnLCByb2xlOiAnVVNFUicgfSxcbiAgeyBpZDogJ25pemFyJywgbmFtZTogJ05pemFyJywgcGluOiAnODg5OTQ0MTFuJywgcm9sZTogJ1VTRVInIH0sXG4gIHsgaWQ6ICdhYmR1JywgbmFtZTogJ0FiZHUnLCBwaW46ICcxMTIyMzM0NGEnLCByb2xlOiAnVVNFUicgfSxcbl07XG5cbi8vIFBvcHVsYXRlIFVzZXJzIGlmIHRoZXkgZG9uJ3QgZXhpc3QgKFNlZWQpXG5hc3luYyBmdW5jdGlvbiBlbnN1cmVVc2VycygpIHtcbiAgZm9yIChjb25zdCB1IG9mIFNFQ1VSRV9VU0VSUykge1xuICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodS5pZCk7XG4gICAgaWYgKCFleGlzdHMpIHtcbiAgICAgIGF3YWl0IFVzZXIuY3JlYXRlKHsgX2lkOiB1LmlkLCAuLi51LCBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkgfSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5lbmQoKTtcblxuICB0cnkge1xuICAgIC8vIDEuIERhdGFiYXNlIENvbm5lY3Rpb24gd2l0aCBUaW1lb3V0XG4gICAgY29uc29sZS5sb2coXCJDb25uZWN0aW5nIHRvIERCLi4uXCIpO1xuICAgIGF3YWl0IGRiQ29ubmVjdCgpO1xuXG4gICAgLy8gMi4gRXh0cmFjdCBEYXRhXG4gICAgY29uc3QgeyBhY3Rpb24sIHBheWxvYWQsIHNlY3JldCB9ID0gcmVxLmJvZHk7XG4gICAgaWYgKCFhY3Rpb24pIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnTWlzc2luZyBhY3Rpb24nIH0pO1xuXG4gICAgY29uc29sZS5sb2coYEFQSSBBY3Rpb246ICR7YWN0aW9ufWApO1xuXG4gICAgLy8gMy4gU2VjdXJpdHkgQ2hlY2tcbiAgICBjb25zdCBhZG1pbkFjdGlvbnMgPSBbJ2FkbWluX3N0YXRzJywgJ2FkbWluX3Jlc2V0JywgJ2FkbWluX3Jlc2V0X3N5c3RlbScsICdhZG1pbl9nZXRfYW5zd2VycycsICdhZG1pbl9leHBvcnQnXTtcbiAgICBpZiAoYWRtaW5BY3Rpb25zLmluY2x1ZGVzKGFjdGlvbikpIHtcbiAgICAgIGNvbnN0IGVudlNlY3JldCA9IHByb2Nlc3MuZW52LkFETUlOX1NFQ1JFVF9LRVk7XG4gICAgICBjb25zdCBmYWxsYmFja1NlY3JldCA9IFwiYlMlODNCNCs0dUFPLSMmJlV5SztIK1wiO1xuICAgICAgaWYgKHNlY3JldCAhPT0gZW52U2VjcmV0ICYmIHNlY3JldCAhPT0gZmFsbGJhY2tTZWNyZXQpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDQuIFNlZWRpbmcgQ2hlY2sgKE9ubHkgb24gbG9naW4gb3IgYWRtaW4gdG8gc2F2ZSBwZXJmb3JtYW5jZSlcbiAgICBpZiAoYWN0aW9uID09PSAnbG9naW5fdXNlcicgfHwgYWN0aW9uID09PSAnYWRtaW5fc3RhdHMnKSB7XG4gICAgICBhd2FpdCBlbnN1cmVVc2VycygpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdsb2dpbl91c2VyJzoge1xuICAgICAgICBjb25zdCB7IHVzZXJJZCwgcGluIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xuXG4gICAgICAgIGlmICh1c2VyICYmIHVzZXIucGluID09PSBwaW4pIHtcbiAgICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgU2Vzc2lvbi5maW5kT25lKHsgdXNlcklkIH0pO1xuICAgICAgICAgIGNvbnN0IGhhc1Byb2dyZXNzID0gISEoc2Vzc2lvbiAmJiAhc2Vzc2lvbi5pc0NvbXBsZXRlZCAmJiAoc2Vzc2lvbi5jdXJyZW50SW5kZXggPiAwIHx8IHNlc3Npb24udG90YWxUaW1lU3BlbnQgPiAwKSk7XG5cbiAgICAgICAgICBjb25zdCB1c2VyT2JqID0gdXNlci50b09iamVjdCgpO1xuICAgICAgICAgIGRlbGV0ZSB1c2VyT2JqLnBpbjtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlLCB1c2VyOiB1c2VyT2JqLCBoYXNQcm9ncmVzcyB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgUElOJyB9KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZ2V0X3VzZXJfZGF0YSc6IHtcbiAgICAgICAgY29uc3QgeyB1c2VySWQgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBTZXNzaW9uLmZpbmRPbmUoeyB1c2VySWQgfSk7XG4gICAgICAgIGNvbnN0IGFuc3dlcnMgPSBhd2FpdCBBbnN3ZXIuZmluZCh7IHVzZXJJZCB9KTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgdXNlciwgc2Vzc2lvbiwgYW5zd2VycyB9KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnc3RhcnRfc2Vzc2lvbic6IHtcbiAgICAgICAgY29uc3QgeyB1c2VySWQgfSA9IHBheWxvYWQ7XG4gICAgICAgIGxldCBzZXNzaW9uID0gYXdhaXQgU2Vzc2lvbi5maW5kT25lKHsgdXNlcklkIH0pO1xuICAgICAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgICAgICBzZXNzaW9uID0gYXdhaXQgU2Vzc2lvbi5jcmVhdGUoeyB1c2VySWQgfSk7XG4gICAgICAgICAgYXdhaXQgTG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICB1c2VySWQsIGFjdGlvbjogJ0xPR0lOJywgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBtZXRhZGF0YTogeyB0eXBlOiAnbmV3JyB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2Vzc2lvbi5sYXN0QWN0aXZlQXQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIHNlc3Npb24ubG9naW5Db3VudCA9IChzZXNzaW9uLmxvZ2luQ291bnQgfHwgMCkgKyAxO1xuICAgICAgICAgIGF3YWl0IHNlc3Npb24uc2F2ZSgpO1xuICAgICAgICAgIGF3YWl0IExvZy5jcmVhdGUoe1xuICAgICAgICAgICAgdXNlcklkLCBhY3Rpb246ICdSRVNVTUUnLCB0aW1lc3RhbXA6IERhdGUubm93KCksIG1ldGFkYXRhOiB7IHR5cGU6ICdleGlzdGluZycsIGNvdW50OiBzZXNzaW9uLmxvZ2luQ291bnQgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMuanNvbihzZXNzaW9uKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndXBkYXRlX2xhbmd1YWdlJzoge1xuICAgICAgICBjb25zdCB7IHVzZXJJZCwgbGFuZ3VhZ2UgfSA9IHBheWxvYWQ7XG4gICAgICAgIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUodXNlcklkLCB7IGxhbmd1YWdlIH0pO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdzYXZlX3Byb2dyZXNzJzoge1xuICAgICAgICBjb25zdCB7IHVzZXJJZCwgcXVlc3Rpb25JZCwgc2VjdGlvbiwgYW5zd2VyVGV4dCwgdGltZVNwZW50LCBjdXJyZW50SW5kZXggfSA9IHBheWxvYWQ7XG5cbiAgICAgICAgLy8gQXRvbWljIHVwZGF0ZSBvZiBzZXNzaW9uIHByb2dyZXNzIGFuZCB0aW1lclxuICAgICAgICBjb25zdCB1cGRhdGVPYmo6IGFueSA9IHtcbiAgICAgICAgICBjdXJyZW50SW5kZXgsXG4gICAgICAgICAgbGFzdEFjdGl2ZUF0OiBEYXRlLm5vdygpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gSW5jcmVtZW50IHRpbWUgZm9yIHRoZSBzZWN0aW9uXG4gICAgICAgIGNvbnN0IHNlY3Rpb25GaWVsZCA9IGBzZWN0aW9uVGltZXMuJHtzZWN0aW9ufWA7XG4gICAgICAgIGNvbnN0IGluY09iajogYW55ID0geyB0b3RhbFRpbWVTcGVudDogdGltZVNwZW50IH07XG4gICAgICAgIGlmIChzZWN0aW9uKSBpbmNPYmpbc2VjdGlvbkZpZWxkXSA9IHRpbWVTcGVudDtcblxuICAgICAgICBhd2FpdCBTZXNzaW9uLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgICAgICAgeyB1c2VySWQgfSxcbiAgICAgICAgICB7ICRzZXQ6IHVwZGF0ZU9iaiwgJGluYzogaW5jT2JqIH0sXG4gICAgICAgICAgeyB1cHNlcnQ6IHRydWUgfVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFNhdmUgb3IgdXBkYXRlIGFuc3dlclxuICAgICAgICBhd2FpdCBBbnN3ZXIuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgICB7IHVzZXJJZCwgcXVlc3Rpb25JZCB9LFxuICAgICAgICAgIHsgc2VjdGlvbiwgYW5zd2VyVGV4dCwgJGluYzogeyB0aW1lU3BlbnQgfSwgdXBkYXRlZEF0OiBEYXRlLm5vdygpIH0sXG4gICAgICAgICAgeyB1cHNlcnQ6IHRydWUgfVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2xvZ19ldmVudCc6IHtcbiAgICAgICAgY29uc3QgeyB1c2VySWQsIGV2ZW50IH0gPSBwYXlsb2FkOyAvLyAnYmFja3RyYWNrJyBvciAnYmx1cidcbiAgICAgICAgY29uc3QgZmllbGQgPSBldmVudCA9PT0gJ2JhY2t0cmFjaycgPyAnYmFja3RyYWNrQ291bnQnIDogJ2JsdXJDb3VudCc7XG4gICAgICAgIGF3YWl0IFNlc3Npb24uZmluZE9uZUFuZFVwZGF0ZSh7IHVzZXJJZCB9LCB7ICRpbmM6IHsgW2ZpZWxkXTogMSB9IH0pO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdoZWFydGJlYXQnOiB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkIH0gPSBwYXlsb2FkO1xuICAgICAgICBhd2FpdCBTZXNzaW9uLmZpbmRPbmVBbmRVcGRhdGUoeyB1c2VySWQgfSwgeyBsYXN0QWN0aXZlQXQ6IERhdGUubm93KCkgfSk7XG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2NvbXBsZXRlX3Nlc3Npb24nOiB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkIH0gPSBwYXlsb2FkO1xuICAgICAgICBhd2FpdCBTZXNzaW9uLmZpbmRPbmVBbmRVcGRhdGUoeyB1c2VySWQgfSwgeyBpc0NvbXBsZXRlZDogdHJ1ZSwgY29tcGxldGVkQXQ6IERhdGUubm93KCkgfSk7XG4gICAgICAgIGF3YWl0IExvZy5jcmVhdGUoeyB1c2VySWQsIGFjdGlvbjogJ0NPTVBMRVRFJywgdGltZXN0YW1wOiBEYXRlLm5vdygpIH0pO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyAtLS0gQWRtaW4gQWN0aW9ucyAtLS1cblxuICAgICAgY2FzZSAnYWRtaW5fc3RhdHMnOiB7XG4gICAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKHsgcm9sZTogJ1VTRVInIH0pO1xuICAgICAgICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IFNlc3Npb24uZmluZCh7fSk7XG4gICAgICAgIGNvbnN0IGFuc3dlcnMgPSBhd2FpdCBBbnN3ZXIuZmluZCh7fSk7XG5cbiAgICAgICAgY29uc3Qgc3RhdHMgPSB1c2Vycy5tYXAodSA9PiB7XG4gICAgICAgICAgY29uc3QgcyA9IHNlc3Npb25zLmZpbmQoc2VzcyA9PiBzZXNzLnVzZXJJZCA9PT0gdS5pZCkgfHwgbnVsbDtcbiAgICAgICAgICBjb25zdCBhQ291bnQgPSBhbnN3ZXJzLmZpbHRlcihhbnMgPT4gYW5zLnVzZXJJZCA9PT0gdS5pZCkubGVuZ3RoO1xuICAgICAgICAgIGNvbnN0IGlzT25saW5lID0gcyA/IChEYXRlLm5vdygpIC0gcy5sYXN0QWN0aXZlQXQgPCAzMDAwMCkgOiBmYWxzZTtcbiAgICAgICAgICByZXR1cm4geyB1c2VyOiB1LCBzZXNzaW9uOiBzLCBhbnN3ZXJDb3VudDogYUNvdW50LCBpc09ubGluZSB9O1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzLmpzb24oc3RhdHMpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhZG1pbl9nZXRfYW5zd2Vycyc6IHtcbiAgICAgICAgY29uc3QgeyB1c2VySWQgfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IGFuc3dlcnMgPSBhd2FpdCBBbnN3ZXIuZmluZCh7IHVzZXJJZCB9KS5zb3J0KHsgcXVlc3Rpb25JZDogMSB9KTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKGFuc3dlcnMpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhZG1pbl9yZXNldCc6IHtcbiAgICAgICAgY29uc3QgeyB0YXJnZXRVc2VySWQgfSA9IHBheWxvYWQ7XG4gICAgICAgIGF3YWl0IFNlc3Npb24uZGVsZXRlT25lKHsgdXNlcklkOiB0YXJnZXRVc2VySWQgfSk7XG4gICAgICAgIGF3YWl0IEFuc3dlci5kZWxldGVNYW55KHsgdXNlcklkOiB0YXJnZXRVc2VySWQgfSk7XG4gICAgICAgIGF3YWl0IFVzZXIuZGVsZXRlT25lKHsgX2lkOiB0YXJnZXRVc2VySWQgfSk7XG4gICAgICAgIGF3YWl0IExvZy5jcmVhdGUoeyB1c2VySWQ6ICdBRE1JTicsIGFjdGlvbjogJ0FETUlOX1JFU0VUJywgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBtZXRhZGF0YTogeyB0YXJnZXRVc2VySWQgfSB9KTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYWRtaW5fcmVzZXRfc3lzdGVtJzoge1xuICAgICAgICBhd2FpdCBTZXNzaW9uLmRlbGV0ZU1hbnkoe30pO1xuICAgICAgICBhd2FpdCBBbnN3ZXIuZGVsZXRlTWFueSh7fSk7XG4gICAgICAgIGF3YWl0IExvZy5kZWxldGVNYW55KHt9KTtcbiAgICAgICAgYXdhaXQgVXNlci5kZWxldGVNYW55KHsgcm9sZTogJ1VTRVInIH0pO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhZG1pbl9leHBvcnQnOiB7XG4gICAgICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgVXNlci5maW5kKHt9KTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbnMgPSBhd2FpdCBTZXNzaW9uLmZpbmQoe30pO1xuICAgICAgICBjb25zdCBhbnN3ZXJzID0gYXdhaXQgQW5zd2VyLmZpbmQoe30pO1xuICAgICAgICBjb25zdCBsb2dzID0gYXdhaXQgTG9nLmZpbmQoe30pO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyB1c2Vycywgc2Vzc2lvbnMsIGFuc3dlcnMsIGxvZ3MgfSk7XG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVW5rbm93biBhY3Rpb24nIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ1JJVElDQUwgQVBJIEVSUk9SOlwiLCBlcnIpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsXG4gICAgICBkZXRhaWxzOiBlcnIubWVzc2FnZSxcbiAgICAgIHN0YWNrOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JyA/IGVyci5zdGFjayA6IHVuZGVmaW5lZFxuICAgIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbImRiQ29ubmVjdCIsIlNlc3Npb24iLCJBbnN3ZXIiLCJMb2ciLCJVc2VyIiwiU0VDVVJFX1VTRVJTIiwiaWQiLCJuYW1lIiwicGluIiwicm9sZSIsImVuc3VyZVVzZXJzIiwidSIsImV4aXN0cyIsImZpbmRCeUlkIiwiY3JlYXRlIiwiX2lkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJjb25zb2xlIiwibG9nIiwiYWN0aW9uIiwicGF5bG9hZCIsInNlY3JldCIsImJvZHkiLCJqc29uIiwiZXJyb3IiLCJhZG1pbkFjdGlvbnMiLCJpbmNsdWRlcyIsImVudlNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJBRE1JTl9TRUNSRVRfS0VZIiwiZmFsbGJhY2tTZWNyZXQiLCJ1c2VySWQiLCJ1c2VyIiwic2Vzc2lvbiIsImZpbmRPbmUiLCJoYXNQcm9ncmVzcyIsImlzQ29tcGxldGVkIiwiY3VycmVudEluZGV4IiwidG90YWxUaW1lU3BlbnQiLCJ1c2VyT2JqIiwidG9PYmplY3QiLCJzdWNjZXNzIiwiYW5zd2VycyIsImZpbmQiLCJ0aW1lc3RhbXAiLCJub3ciLCJtZXRhZGF0YSIsInR5cGUiLCJsYXN0QWN0aXZlQXQiLCJsb2dpbkNvdW50Iiwic2F2ZSIsImNvdW50IiwibGFuZ3VhZ2UiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsInF1ZXN0aW9uSWQiLCJzZWN0aW9uIiwiYW5zd2VyVGV4dCIsInRpbWVTcGVudCIsInVwZGF0ZU9iaiIsInNlY3Rpb25GaWVsZCIsImluY09iaiIsImZpbmRPbmVBbmRVcGRhdGUiLCIkc2V0IiwiJGluYyIsInVwc2VydCIsInVwZGF0ZWRBdCIsImV2ZW50IiwiZmllbGQiLCJjb21wbGV0ZWRBdCIsInVzZXJzIiwic2Vzc2lvbnMiLCJzdGF0cyIsIm1hcCIsInMiLCJzZXNzIiwiYUNvdW50IiwiZmlsdGVyIiwiYW5zIiwibGVuZ3RoIiwiaXNPbmxpbmUiLCJhbnN3ZXJDb3VudCIsInNvcnQiLCJ0YXJnZXRVc2VySWQiLCJkZWxldGVPbmUiLCJkZWxldGVNYW55IiwibG9ncyIsImVyciIsImRldGFpbHMiLCJtZXNzYWdlIiwic3RhY2siLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/v1.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();