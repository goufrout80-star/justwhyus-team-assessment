"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/v1";
exports.ids = ["pages/api/v1"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_v1_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\v1.ts */ \"(api)/./pages/api/v1.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_v1_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_v1_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/v1\",\n        pathname: \"/api/v1\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_v1_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnYxJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUN2MS50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNnRDtBQUNoRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsNkNBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDZDQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2p1c3R3aHl1cy1hc3Nlc3NtZW50Lz9iYTBjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcdjEudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92MVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3YxXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nif (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable inside .env.local\");\n}\n/**\n * Global is used here to maintain a cached connection across hot reloads\n * in development. This prevents connections growing exponentially\n * during API Route usage.\n */ let cached = globalThis.mongoose;\nif (!cached) {\n    cached = globalThis.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function dbConnect() {\n    if (cached.conn) {\n        return cached.conn;\n    }\n    if (!cached.promise) {\n        const opts = {\n            bufferCommands: false,\n            maxPoolSize: 10\n        };\n        cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, opts).then((mongoose)=>{\n            return mongoose;\n        });\n    }\n    try {\n        cached.conn = await cached.promise;\n    } catch (e) {\n        cached.promise = null;\n        throw e;\n    }\n    return cached.conn;\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (dbConnect);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0M7QUFFaEMsTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDRixXQUFXO0FBRTNDLElBQUksQ0FBQ0EsYUFBYTtJQUNoQixNQUFNLElBQUlHLE1BQU07QUFDbEI7QUFFQTs7OztDQUlDLEdBQ0QsSUFBSUMsU0FBUyxXQUFvQkwsUUFBUTtBQUV6QyxJQUFJLENBQUNLLFFBQVE7SUFDWEEsU0FBUyxXQUFvQkwsUUFBUSxHQUFHO1FBQUVPLE1BQU07UUFBTUMsU0FBUztJQUFLO0FBQ3RFO0FBRUEsZUFBZUM7SUFDYixJQUFJSixPQUFPRSxJQUFJLEVBQUU7UUFDZixPQUFPRixPQUFPRSxJQUFJO0lBQ3BCO0lBRUEsSUFBSSxDQUFDRixPQUFPRyxPQUFPLEVBQUU7UUFDbkIsTUFBTUUsT0FBTztZQUNYQyxnQkFBZ0I7WUFDaEJDLGFBQWE7UUFDZjtRQUVBUCxPQUFPRyxPQUFPLEdBQUdSLHVEQUFnQixDQUFDQyxhQUFjUyxNQUFNSSxJQUFJLENBQUMsQ0FBQ2Q7WUFDMUQsT0FBT0E7UUFDVDtJQUNGO0lBRUEsSUFBSTtRQUNGSyxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztJQUNwQyxFQUFFLE9BQU9PLEdBQUc7UUFDVlYsT0FBT0csT0FBTyxHQUFHO1FBQ2pCLE1BQU1PO0lBQ1I7SUFFQSxPQUFPVixPQUFPRSxJQUFJO0FBQ3BCO0FBRUEsaUVBQWVFLFNBQVNBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qdXN0d2h5dXMtYXNzZXNzbWVudC8uL2xpYi9tb25nb2RiLnRzPzA1YmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgTU9OR09EQl9VUkkgPSBwcm9jZXNzLmVudi5NT05HT0RCX1VSSTtcblxuaWYgKCFNT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBkZWZpbmUgdGhlIE1PTkdPREJfVVJJIGVudmlyb25tZW50IHZhcmlhYmxlIGluc2lkZSAuZW52LmxvY2FsJyk7XG59XG5cbi8qKlxuICogR2xvYmFsIGlzIHVzZWQgaGVyZSB0byBtYWludGFpbiBhIGNhY2hlZCBjb25uZWN0aW9uIGFjcm9zcyBob3QgcmVsb2Fkc1xuICogaW4gZGV2ZWxvcG1lbnQuIFRoaXMgcHJldmVudHMgY29ubmVjdGlvbnMgZ3Jvd2luZyBleHBvbmVudGlhbGx5XG4gKiBkdXJpbmcgQVBJIFJvdXRlIHVzYWdlLlxuICovXG5sZXQgY2FjaGVkID0gKGdsb2JhbFRoaXMgYXMgYW55KS5tb25nb29zZTtcblxuaWYgKCFjYWNoZWQpIHtcbiAgY2FjaGVkID0gKGdsb2JhbFRoaXMgYXMgYW55KS5tb25nb29zZSA9IHsgY29ubjogbnVsbCwgcHJvbWlzZTogbnVsbCB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBkYkNvbm5lY3QoKSB7XG4gIGlmIChjYWNoZWQuY29ubikge1xuICAgIHJldHVybiBjYWNoZWQuY29ubjtcbiAgfVxuXG4gIGlmICghY2FjaGVkLnByb21pc2UpIHtcbiAgICBjb25zdCBvcHRzID0ge1xuICAgICAgYnVmZmVyQ29tbWFuZHM6IGZhbHNlLFxuICAgICAgbWF4UG9vbFNpemU6IDEwLFxuICAgIH07XG5cbiAgICBjYWNoZWQucHJvbWlzZSA9IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkkhLCBvcHRzKS50aGVuKChtb25nb29zZSkgPT4ge1xuICAgICAgcmV0dXJuIG1vbmdvb3NlO1xuICAgIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjYWNoZWQuY29ubiA9IGF3YWl0IGNhY2hlZC5wcm9taXNlO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY2FjaGVkLnByb21pc2UgPSBudWxsO1xuICAgIHRocm93IGU7XG4gIH1cblxuICByZXR1cm4gY2FjaGVkLmNvbm47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGRiQ29ubmVjdDsiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJFcnJvciIsImNhY2hlZCIsImdsb2JhbFRoaXMiLCJjb25uIiwicHJvbWlzZSIsImRiQ29ubmVjdCIsIm9wdHMiLCJidWZmZXJDb21tYW5kcyIsIm1heFBvb2xTaXplIiwiY29ubmVjdCIsInRoZW4iLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.ts\n");

/***/ }),

/***/ "(api)/./models/Schema.ts":
/*!**************************!*\
  !*** ./models/Schema.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Answer: () => (/* binding */ Answer),\n/* harmony export */   Log: () => (/* binding */ Log),\n/* harmony export */   Session: () => (/* binding */ Session),\n/* harmony export */   User: () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst UserSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    _id: {\n        type: String,\n        required: true\n    },\n    name: String,\n    pin: String,\n    role: String,\n    language: String,\n    createdAt: Date\n});\nconst SessionSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: String,\n        required: true,\n        unique: true\n    },\n    currentSection: {\n        type: String,\n        default: \"Mindset\"\n    },\n    currentIndex: {\n        type: Number,\n        default: 0\n    },\n    startedAt: {\n        type: Number,\n        default: Date.now\n    },\n    lastActiveAt: {\n        type: Number,\n        default: Date.now\n    },\n    totalTimeSpent: {\n        type: Number,\n        default: 0\n    },\n    isCompleted: {\n        type: Boolean,\n        default: false\n    },\n    completedAt: Number,\n    // Analytics\n    loginCount: {\n        type: Number,\n        default: 1\n    },\n    backtrackCount: {\n        type: Number,\n        default: 0\n    },\n    blurCount: {\n        type: Number,\n        default: 0\n    },\n    sectionTimes: {\n        Mindset: {\n            type: Number,\n            default: 0\n        },\n        Skills: {\n            type: Number,\n            default: 0\n        },\n        Values: {\n            type: Number,\n            default: 0\n        },\n        \"Logic & Reasoning\": {\n            type: Number,\n            default: 0\n        }\n    }\n});\nconst AnswerSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: String,\n        required: true\n    },\n    questionId: {\n        type: Number,\n        required: true\n    },\n    section: String,\n    answerText: String,\n    timeSpent: Number,\n    updatedAt: {\n        type: Number,\n        default: Date.now\n    }\n});\n// Composite index for quick lookups\nAnswerSchema.index({\n    userId: 1,\n    questionId: 1\n}, {\n    unique: true\n});\nconst LogSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    id: String,\n    userId: String,\n    action: String,\n    timestamp: Number,\n    metadata: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.Mixed\n});\n// Helper to prevent strict type union errors in Next.js builds with Mongoose\n// Casting to Model<any> ensures TS sees a single compatible signature\nconst User = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.User || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"User\", UserSchema);\nconst Session = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Session || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Session\", SessionSchema);\nconst Answer = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Answer || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Answer\", AnswerSchema);\nconst Log = mongoose__WEBPACK_IMPORTED_MODULE_0__.models.Log || (0,mongoose__WEBPACK_IMPORTED_MODULE_0__.model)(\"Log\", LogSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvU2NoZW1hLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRTtBQUVsRSxNQUFNRyxhQUFhLElBQUlILDRDQUFNQSxDQUFDO0lBQzVCSSxLQUFLO1FBQUVDLE1BQU1DO1FBQVFDLFVBQVU7SUFBSztJQUNwQ0MsTUFBTUY7SUFDTkcsS0FBS0g7SUFDTEksTUFBTUo7SUFDTkssVUFBVUw7SUFDVk0sV0FBV0M7QUFDYjtBQUVBLE1BQU1DLGdCQUFnQixJQUFJZCw0Q0FBTUEsQ0FBQztJQUMvQmUsUUFBUTtRQUFFVixNQUFNQztRQUFRQyxVQUFVO1FBQU1TLFFBQVE7SUFBSztJQUNyREMsZ0JBQWdCO1FBQUVaLE1BQU1DO1FBQVFZLFNBQVM7SUFBVTtJQUNuREMsY0FBYztRQUFFZCxNQUFNZTtRQUFRRixTQUFTO0lBQUU7SUFDekNHLFdBQVc7UUFBRWhCLE1BQU1lO1FBQVFGLFNBQVNMLEtBQUtTLEdBQUc7SUFBQztJQUM3Q0MsY0FBYztRQUFFbEIsTUFBTWU7UUFBUUYsU0FBU0wsS0FBS1MsR0FBRztJQUFDO0lBQ2hERSxnQkFBZ0I7UUFBRW5CLE1BQU1lO1FBQVFGLFNBQVM7SUFBRTtJQUMzQ08sYUFBYTtRQUFFcEIsTUFBTXFCO1FBQVNSLFNBQVM7SUFBTTtJQUM3Q1MsYUFBYVA7SUFFYixZQUFZO0lBQ1pRLFlBQVk7UUFBRXZCLE1BQU1lO1FBQVFGLFNBQVM7SUFBRTtJQUN2Q1csZ0JBQWdCO1FBQUV4QixNQUFNZTtRQUFRRixTQUFTO0lBQUU7SUFDM0NZLFdBQVc7UUFBRXpCLE1BQU1lO1FBQVFGLFNBQVM7SUFBRTtJQUN0Q2EsY0FBYztRQUNaQyxTQUFTO1lBQUUzQixNQUFNZTtZQUFRRixTQUFTO1FBQUU7UUFDcENlLFFBQVE7WUFBRTVCLE1BQU1lO1lBQVFGLFNBQVM7UUFBRTtRQUNuQ2dCLFFBQVE7WUFBRTdCLE1BQU1lO1lBQVFGLFNBQVM7UUFBRTtRQUNuQyxxQkFBcUI7WUFBRWIsTUFBTWU7WUFBUUYsU0FBUztRQUFFO0lBQ2xEO0FBQ0Y7QUFFQSxNQUFNaUIsZUFBZSxJQUFJbkMsNENBQU1BLENBQUM7SUFDOUJlLFFBQVE7UUFBRVYsTUFBTUM7UUFBUUMsVUFBVTtJQUFLO0lBQ3ZDNkIsWUFBWTtRQUFFL0IsTUFBTWU7UUFBUWIsVUFBVTtJQUFLO0lBQzNDOEIsU0FBUy9CO0lBQ1RnQyxZQUFZaEM7SUFDWmlDLFdBQVduQjtJQUNYb0IsV0FBVztRQUFFbkMsTUFBTWU7UUFBUUYsU0FBU0wsS0FBS1MsR0FBRztJQUFDO0FBQy9DO0FBRUEsb0NBQW9DO0FBQ3BDYSxhQUFhTSxLQUFLLENBQUM7SUFBRTFCLFFBQVE7SUFBR3FCLFlBQVk7QUFBRSxHQUFHO0lBQUVwQixRQUFRO0FBQUs7QUFFaEUsTUFBTTBCLFlBQVksSUFBSTFDLDRDQUFNQSxDQUFDO0lBQzNCMkMsSUFBSXJDO0lBQ0pTLFFBQVFUO0lBQ1JzQyxRQUFRdEM7SUFDUnVDLFdBQVd6QjtJQUNYMEIsVUFBVTlDLDRDQUFNQSxDQUFDK0MsS0FBSyxDQUFDQyxLQUFLO0FBQzlCO0FBRUEsNkVBQTZFO0FBQzdFLHNFQUFzRTtBQUMvRCxNQUFNQyxPQUFRL0MsNENBQU1BLENBQUMrQyxJQUFJLElBQUloRCwrQ0FBS0EsQ0FBQyxRQUFRRSxZQUEyQjtBQUN0RSxNQUFNK0MsVUFBV2hELDRDQUFNQSxDQUFDZ0QsT0FBTyxJQUFJakQsK0NBQUtBLENBQUMsV0FBV2EsZUFBOEI7QUFDbEYsTUFBTXFDLFNBQVVqRCw0Q0FBTUEsQ0FBQ2lELE1BQU0sSUFBSWxELCtDQUFLQSxDQUFDLFVBQVVrQyxjQUE2QjtBQUM5RSxNQUFNaUIsTUFBT2xELDRDQUFNQSxDQUFDa0QsR0FBRyxJQUFJbkQsK0NBQUtBLENBQUMsT0FBT3lDLFdBQTBCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanVzdHdoeXVzLWFzc2Vzc21lbnQvLi9tb2RlbHMvU2NoZW1hLnRzPzM3N2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSwgbW9kZWwsIG1vZGVscywgTW9kZWwgfSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IFVzZXJTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgX2lkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSwgLy8gTWFudWFsbHkgc2V0IHRvIG1hdGNoIFVTRVJTIGNvbnN0YW50IElEc1xuICBuYW1lOiBTdHJpbmcsXG4gIHBpbjogU3RyaW5nLFxuICByb2xlOiBTdHJpbmcsXG4gIGxhbmd1YWdlOiBTdHJpbmcsXG4gIGNyZWF0ZWRBdDogRGF0ZVxufSk7XG5cbmNvbnN0IFNlc3Npb25TY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgdXNlcklkOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUsIHVuaXF1ZTogdHJ1ZSB9LFxuICBjdXJyZW50U2VjdGlvbjogeyB0eXBlOiBTdHJpbmcsIGRlZmF1bHQ6ICdNaW5kc2V0JyB9LFxuICBjdXJyZW50SW5kZXg6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gIHN0YXJ0ZWRBdDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IERhdGUubm93IH0sXG4gIGxhc3RBY3RpdmVBdDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IERhdGUubm93IH0sXG4gIHRvdGFsVGltZVNwZW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICBpc0NvbXBsZXRlZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiBmYWxzZSB9LFxuICBjb21wbGV0ZWRBdDogTnVtYmVyLFxuXG4gIC8vIEFuYWx5dGljc1xuICBsb2dpbkNvdW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMSB9LFxuICBiYWNrdHJhY2tDb3VudDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgYmx1ckNvdW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LCAvLyBEaXN0cmFjdGlvbiB0cmFja2luZ1xuICBzZWN0aW9uVGltZXM6IHtcbiAgICBNaW5kc2V0OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxuICAgIFNraWxsczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcbiAgICBWYWx1ZXM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXG4gICAgJ0xvZ2ljICYgUmVhc29uaW5nJzogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfVxuICB9XG59KTtcblxuY29uc3QgQW5zd2VyU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHVzZXJJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHF1ZXN0aW9uSWQ6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBzZWN0aW9uOiBTdHJpbmcsXG4gIGFuc3dlclRleHQ6IFN0cmluZyxcbiAgdGltZVNwZW50OiBOdW1iZXIsXG4gIHVwZGF0ZWRBdDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IERhdGUubm93IH1cbn0pO1xuXG4vLyBDb21wb3NpdGUgaW5kZXggZm9yIHF1aWNrIGxvb2t1cHNcbkFuc3dlclNjaGVtYS5pbmRleCh7IHVzZXJJZDogMSwgcXVlc3Rpb25JZDogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcblxuY29uc3QgTG9nU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGlkOiBTdHJpbmcsXG4gIHVzZXJJZDogU3RyaW5nLFxuICBhY3Rpb246IFN0cmluZyxcbiAgdGltZXN0YW1wOiBOdW1iZXIsXG4gIG1ldGFkYXRhOiBTY2hlbWEuVHlwZXMuTWl4ZWRcbn0pO1xuXG4vLyBIZWxwZXIgdG8gcHJldmVudCBzdHJpY3QgdHlwZSB1bmlvbiBlcnJvcnMgaW4gTmV4dC5qcyBidWlsZHMgd2l0aCBNb25nb29zZVxuLy8gQ2FzdGluZyB0byBNb2RlbDxhbnk+IGVuc3VyZXMgVFMgc2VlcyBhIHNpbmdsZSBjb21wYXRpYmxlIHNpZ25hdHVyZVxuZXhwb3J0IGNvbnN0IFVzZXIgPSAobW9kZWxzLlVzZXIgfHwgbW9kZWwoJ1VzZXInLCBVc2VyU2NoZW1hKSkgYXMgTW9kZWw8YW55PjtcbmV4cG9ydCBjb25zdCBTZXNzaW9uID0gKG1vZGVscy5TZXNzaW9uIHx8IG1vZGVsKCdTZXNzaW9uJywgU2Vzc2lvblNjaGVtYSkpIGFzIE1vZGVsPGFueT47XG5leHBvcnQgY29uc3QgQW5zd2VyID0gKG1vZGVscy5BbnN3ZXIgfHwgbW9kZWwoJ0Fuc3dlcicsIEFuc3dlclNjaGVtYSkpIGFzIE1vZGVsPGFueT47XG5leHBvcnQgY29uc3QgTG9nID0gKG1vZGVscy5Mb2cgfHwgbW9kZWwoJ0xvZycsIExvZ1NjaGVtYSkpIGFzIE1vZGVsPGFueT47Il0sIm5hbWVzIjpbIlNjaGVtYSIsIm1vZGVsIiwibW9kZWxzIiwiVXNlclNjaGVtYSIsIl9pZCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm5hbWUiLCJwaW4iLCJyb2xlIiwibGFuZ3VhZ2UiLCJjcmVhdGVkQXQiLCJEYXRlIiwiU2Vzc2lvblNjaGVtYSIsInVzZXJJZCIsInVuaXF1ZSIsImN1cnJlbnRTZWN0aW9uIiwiZGVmYXVsdCIsImN1cnJlbnRJbmRleCIsIk51bWJlciIsInN0YXJ0ZWRBdCIsIm5vdyIsImxhc3RBY3RpdmVBdCIsInRvdGFsVGltZVNwZW50IiwiaXNDb21wbGV0ZWQiLCJCb29sZWFuIiwiY29tcGxldGVkQXQiLCJsb2dpbkNvdW50IiwiYmFja3RyYWNrQ291bnQiLCJibHVyQ291bnQiLCJzZWN0aW9uVGltZXMiLCJNaW5kc2V0IiwiU2tpbGxzIiwiVmFsdWVzIiwiQW5zd2VyU2NoZW1hIiwicXVlc3Rpb25JZCIsInNlY3Rpb24iLCJhbnN3ZXJUZXh0IiwidGltZVNwZW50IiwidXBkYXRlZEF0IiwiaW5kZXgiLCJMb2dTY2hlbWEiLCJpZCIsImFjdGlvbiIsInRpbWVzdGFtcCIsIm1ldGFkYXRhIiwiVHlwZXMiLCJNaXhlZCIsIlVzZXIiLCJTZXNzaW9uIiwiQW5zd2VyIiwiTG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/Schema.ts\n");

/***/ }),

/***/ "(api)/./pages/api/v1.ts":
/*!*************************!*\
  !*** ./pages/api/v1.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/mongodb */ \"(api)/./lib/mongodb.ts\");\n/* harmony import */ var _models_Schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../models/Schema */ \"(api)/./models/Schema.ts\");\n\n\n// Secure User List (Server-Side Only)\nconst SECURE_USERS = [\n    {\n        id: \"u1\",\n        name: \"Mahmoud\",\n        pin: \"77337733w\",\n        role: \"USER\"\n    },\n    {\n        id: \"u2\",\n        name: \"Ismail\",\n        pin: \"77002887p\",\n        role: \"USER\"\n    },\n    {\n        id: \"u3\",\n        name: \"Ayoub\",\n        pin: \"00229900e\",\n        role: \"USER\"\n    },\n    {\n        id: \"nizar\",\n        name: \"Nizar\",\n        pin: \"88994411n\",\n        role: \"USER\"\n    },\n    {\n        id: \"abdu\",\n        name: \"Abdu\",\n        pin: \"11223344a\",\n        role: \"USER\"\n    }\n];\n// Populate Users if they don't exist (Seed)\nasync function ensureUsers() {\n    for (const u of SECURE_USERS){\n        const exists = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.findById(u.id);\n        if (!exists) {\n            await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.create({\n                _id: u.id,\n                ...u,\n                createdAt: new Date()\n            });\n        }\n    }\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") return res.status(405).end();\n    await (0,_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n    await ensureUsers();\n    const { action, payload, secret } = req.body;\n    // Basic Security Check for Admin Actions\n    const adminActions = [\n        \"admin_stats\",\n        \"admin_reset\",\n        \"admin_reset_system\",\n        \"admin_get_answers\",\n        \"admin_export\"\n    ];\n    if (adminActions.includes(action)) {\n        const envSecret = process.env.ADMIN_SECRET_KEY;\n        const fallbackSecret = \"bS%83B4+4uAO-#&&UyK;H+\";\n        // Check if it matches either the ENV variable OR the hardcoded fallback\n        if (secret !== envSecret && secret !== fallbackSecret) {\n            return res.status(401).json({\n                error: \"Unauthorized\"\n            });\n        }\n    }\n    try {\n        switch(action){\n            case \"login_user\":\n                {\n                    const { userId, pin } = payload;\n                    const user = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.findById(userId);\n                    if (user && user.pin === pin) {\n                        // Check for existing session to determining resume state\n                        const session = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOne({\n                            userId\n                        });\n                        const hasProgress = session && !session.isCompleted && (session.currentIndex > 0 || session.totalTimeSpent > 0);\n                        // Return user without PIN\n                        const userObj = user.toObject();\n                        delete userObj.pin;\n                        return res.json({\n                            success: true,\n                            user: userObj,\n                            hasProgress\n                        });\n                    }\n                    return res.status(401).json({\n                        error: \"Invalid PIN\"\n                    });\n                }\n            case \"get_user_data\":\n                {\n                    const { userId } = payload;\n                    const user = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.findById(userId);\n                    const session = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOne({\n                        userId\n                    });\n                    const answers = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.find({\n                        userId\n                    });\n                    return res.json({\n                        user,\n                        session,\n                        answers\n                    });\n                }\n            case \"start_session\":\n                {\n                    const { userId } = payload;\n                    let session = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOne({\n                        userId\n                    });\n                    if (!session) {\n                        session = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.create({\n                            userId\n                        });\n                        await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.create({\n                            userId,\n                            action: \"LOGIN\",\n                            timestamp: Date.now(),\n                            metadata: {\n                                type: \"new\"\n                            }\n                        });\n                    } else {\n                        session.lastActiveAt = Date.now();\n                        session.loginCount = (session.loginCount || 0) + 1;\n                        await session.save();\n                        await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.create({\n                            userId,\n                            action: \"RESUME\",\n                            timestamp: Date.now(),\n                            metadata: {\n                                type: \"existing\",\n                                count: session.loginCount\n                            }\n                        });\n                    }\n                    return res.json(session);\n                }\n            case \"update_language\":\n                {\n                    const { userId, language } = payload;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.findByIdAndUpdate(userId, {\n                        language\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"save_progress\":\n                {\n                    const { userId, questionId, section, answerText, timeSpent, currentIndex } = payload;\n                    // 1. Save Answer\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.findOneAndUpdate({\n                        userId,\n                        questionId\n                    }, {\n                        section,\n                        answerText,\n                        $inc: {\n                            timeSpent: timeSpent || 0\n                        },\n                        updatedAt: Date.now()\n                    }, {\n                        upsert: true,\n                        new: true\n                    });\n                    // 2. Update Session\n                    const updateObj = {\n                        currentIndex,\n                        currentSection: section,\n                        lastActiveAt: Date.now(),\n                        $inc: {\n                            totalTimeSpent: timeSpent || 0\n                        }\n                    };\n                    // Use $inc for nested section time\n                    if (section) {\n                        updateObj.$inc[`sectionTimes.${section}`] = timeSpent || 0;\n                    }\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOneAndUpdate({\n                        userId\n                    }, updateObj);\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"log_event\":\n                {\n                    const { userId, event } = payload; // event could be 'backtrack' or 'blur'\n                    const field = event === \"backtrack\" ? \"backtrackCount\" : event === \"blur\" ? \"blurCount\" : null;\n                    if (field) {\n                        await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOneAndUpdate({\n                            userId\n                        }, {\n                            $inc: {\n                                [field]: 1\n                            }\n                        });\n                    }\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"heartbeat\":\n                {\n                    const { userId } = payload;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOneAndUpdate({\n                        userId\n                    }, {\n                        lastActiveAt: Date.now()\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"complete_session\":\n                {\n                    const { userId } = payload;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.findOneAndUpdate({\n                        userId\n                    }, {\n                        isCompleted: true,\n                        completedAt: Date.now()\n                    });\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.create({\n                        userId,\n                        action: \"COMPLETE\",\n                        timestamp: Date.now()\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            // --- Admin Actions ---\n            case \"admin_stats\":\n                {\n                    const users = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.find({});\n                    const sessions = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.find({});\n                    const answers = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.find({}); // Optimization: could be aggressive for huge datasets, but fine for <100 users\n                    const stats = users.map((u)=>{\n                        const sess = sessions.find((s)=>s.userId === u._id.toString());\n                        const userAns = answers.filter((a)=>a.userId === u._id.toString());\n                        return {\n                            user: {\n                                id: u._id,\n                                name: u.name,\n                                role: u.role,\n                                language: u.language\n                            },\n                            session: sess ? sess.toObject() : null,\n                            answerCount: userAns.length,\n                            isOnline: sess ? Date.now() - sess.lastActiveAt < 30000 : false\n                        };\n                    });\n                    return res.json(stats);\n                }\n            case \"admin_get_answers\":\n                {\n                    const { userId } = payload;\n                    const answers = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.find({\n                        userId\n                    });\n                    return res.json(answers);\n                }\n            case \"admin_reset\":\n                {\n                    const { targetUserId, adminId } = payload;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.deleteOne({\n                        _id: targetUserId\n                    }); // Reset user metadata (language, etc)\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.deleteOne({\n                        userId: targetUserId\n                    });\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.deleteMany({\n                        userId: targetUserId\n                    });\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.create({\n                        userId: targetUserId,\n                        action: \"ADMIN_RESET\",\n                        timestamp: Date.now(),\n                        metadata: {\n                            by: adminId\n                        }\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"admin_reset_system\":\n                {\n                    const { adminId } = payload;\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.deleteMany({}); // Wipe all user data\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.deleteMany({});\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.deleteMany({});\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.deleteMany({});\n                    await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.create({\n                        userId: \"SYSTEM\",\n                        action: \"ADMIN_RESET\",\n                        timestamp: Date.now(),\n                        metadata: {\n                            by: adminId,\n                            type: \"full\"\n                        }\n                    });\n                    return res.json({\n                        success: true\n                    });\n                }\n            case \"admin_export\":\n                {\n                    const users = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.User.find({});\n                    const sessions = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Session.find({});\n                    const answers = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Answer.find({});\n                    const logs = await _models_Schema__WEBPACK_IMPORTED_MODULE_1__.Log.find({});\n                    return res.json({\n                        users,\n                        sessions,\n                        answers,\n                        logs\n                    });\n                }\n            default:\n                return res.status(400).json({\n                    error: \"Invalid action\"\n                });\n        }\n    } catch (err) {\n        console.error(err);\n        return res.status(500).json({\n            error: \"Internal Server Error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUs7Z0JBQ25EO1lBRUE7Z0JBQ0UsT0FBT3hFLElBQUlFLE1BQU0sQ0FBQyxLQUFLYSxJQUFJLENBQUM7b0JBQUVDLE9BQU87Z0JBQWlCO1FBQzFEO0lBQ0YsRUFBRSxPQUFPeUQsS0FBSztRQUNaQyxRQUFRMUQsS0FBSyxDQUFDeUQ7UUFDZCxPQUFPekUsSUFBSUUsTUFBTSxDQUFDLEtBQUthLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXdCO0lBQy9EO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qdXN0d2h5dXMtYXNzZXNzbWVudC8uL3BhZ2VzL2FwaS92MS50cz80NjlhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IGRiQ29ubmVjdCBmcm9tICcuLi8uLi9saWIvbW9uZ29kYic7XG5pbXBvcnQgeyBTZXNzaW9uLCBBbnN3ZXIsIExvZywgVXNlciB9IGZyb20gJy4uLy4uL21vZGVscy9TY2hlbWEnO1xuaW1wb3J0IHsgVVNFUlMgfSBmcm9tICcuLi8uLi9jb25zdGFudHMnO1xuXG4vLyBTZWN1cmUgVXNlciBMaXN0IChTZXJ2ZXItU2lkZSBPbmx5KVxuY29uc3QgU0VDVVJFX1VTRVJTID0gW1xuICB7IGlkOiAndTEnLCBuYW1lOiAnTWFobW91ZCcsIHBpbjogJzc3MzM3NzMzdycsIHJvbGU6ICdVU0VSJyB9LFxuICB7IGlkOiAndTInLCBuYW1lOiAnSXNtYWlsJywgcGluOiAnNzcwMDI4ODdwJywgcm9sZTogJ1VTRVInIH0sXG4gIHsgaWQ6ICd1MycsIG5hbWU6ICdBeW91YicsIHBpbjogJzAwMjI5OTAwZScsIHJvbGU6ICdVU0VSJyB9LFxuICB7IGlkOiAnbml6YXInLCBuYW1lOiAnTml6YXInLCBwaW46ICc4ODk5NDQxMW4nLCByb2xlOiAnVVNFUicgfSxcbiAgeyBpZDogJ2FiZHUnLCBuYW1lOiAnQWJkdScsIHBpbjogJzExMjIzMzQ0YScsIHJvbGU6ICdVU0VSJyB9LFxuXTtcblxuLy8gUG9wdWxhdGUgVXNlcnMgaWYgdGhleSBkb24ndCBleGlzdCAoU2VlZClcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZVVzZXJzKCkge1xuICBmb3IgKGNvbnN0IHUgb2YgU0VDVVJFX1VTRVJTKSB7XG4gICAgY29uc3QgZXhpc3RzID0gYXdhaXQgVXNlci5maW5kQnlJZCh1LmlkKTtcbiAgICBpZiAoIWV4aXN0cykge1xuICAgICAgYXdhaXQgVXNlci5jcmVhdGUoeyBfaWQ6IHUuaWQsIC4uLnUsIGNyZWF0ZWRBdDogbmV3IERhdGUoKSB9KTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZCgpO1xuXG4gIGF3YWl0IGRiQ29ubmVjdCgpO1xuICBhd2FpdCBlbnN1cmVVc2VycygpO1xuXG4gIGNvbnN0IHsgYWN0aW9uLCBwYXlsb2FkLCBzZWNyZXQgfSA9IHJlcS5ib2R5O1xuXG4gIC8vIEJhc2ljIFNlY3VyaXR5IENoZWNrIGZvciBBZG1pbiBBY3Rpb25zXG4gIGNvbnN0IGFkbWluQWN0aW9ucyA9IFsnYWRtaW5fc3RhdHMnLCAnYWRtaW5fcmVzZXQnLCAnYWRtaW5fcmVzZXRfc3lzdGVtJywgJ2FkbWluX2dldF9hbnN3ZXJzJywgJ2FkbWluX2V4cG9ydCddO1xuICBpZiAoYWRtaW5BY3Rpb25zLmluY2x1ZGVzKGFjdGlvbikpIHtcbiAgICBjb25zdCBlbnZTZWNyZXQgPSBwcm9jZXNzLmVudi5BRE1JTl9TRUNSRVRfS0VZO1xuICAgIGNvbnN0IGZhbGxiYWNrU2VjcmV0ID0gXCJiUyU4M0I0KzR1QU8tIyYmVXlLO0grXCI7XG5cbiAgICAvLyBDaGVjayBpZiBpdCBtYXRjaGVzIGVpdGhlciB0aGUgRU5WIHZhcmlhYmxlIE9SIHRoZSBoYXJkY29kZWQgZmFsbGJhY2tcbiAgICBpZiAoc2VjcmV0ICE9PSBlbnZTZWNyZXQgJiYgc2VjcmV0ICE9PSBmYWxsYmFja1NlY3JldCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgIH1cbiAgfVxuXG4gIHRyeSB7XG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2xvZ2luX3VzZXInOiB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBwaW4gfSA9IHBheWxvYWQ7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XG5cbiAgICAgICAgaWYgKHVzZXIgJiYgdXNlci5waW4gPT09IHBpbikge1xuICAgICAgICAgIC8vIENoZWNrIGZvciBleGlzdGluZyBzZXNzaW9uIHRvIGRldGVybWluaW5nIHJlc3VtZSBzdGF0ZVxuICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBTZXNzaW9uLmZpbmRPbmUoeyB1c2VySWQgfSk7XG4gICAgICAgICAgY29uc3QgaGFzUHJvZ3Jlc3MgPSBzZXNzaW9uICYmICFzZXNzaW9uLmlzQ29tcGxldGVkICYmIChzZXNzaW9uLmN1cnJlbnRJbmRleCA+IDAgfHwgc2Vzc2lvbi50b3RhbFRpbWVTcGVudCA+IDApO1xuXG4gICAgICAgICAgLy8gUmV0dXJuIHVzZXIgd2l0aG91dCBQSU5cbiAgICAgICAgICBjb25zdCB1c2VyT2JqID0gdXNlci50b09iamVjdCgpO1xuICAgICAgICAgIGRlbGV0ZSB1c2VyT2JqLnBpbjtcblxuICAgICAgICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUsIHVzZXI6IHVzZXJPYmosIGhhc1Byb2dyZXNzIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAnSW52YWxpZCBQSU4nIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdnZXRfdXNlcl9kYXRhJzoge1xuICAgICAgICBjb25zdCB7IHVzZXJJZCB9ID0gcGF5bG9hZDtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IFNlc3Npb24uZmluZE9uZSh7IHVzZXJJZCB9KTtcbiAgICAgICAgY29uc3QgYW5zd2VycyA9IGF3YWl0IEFuc3dlci5maW5kKHsgdXNlcklkIH0pO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyB1c2VyLCBzZXNzaW9uLCBhbnN3ZXJzIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdzdGFydF9zZXNzaW9uJzoge1xuICAgICAgICBjb25zdCB7IHVzZXJJZCB9ID0gcGF5bG9hZDtcbiAgICAgICAgbGV0IHNlc3Npb24gPSBhd2FpdCBTZXNzaW9uLmZpbmRPbmUoeyB1c2VySWQgfSk7XG4gICAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICAgIHNlc3Npb24gPSBhd2FpdCBTZXNzaW9uLmNyZWF0ZSh7IHVzZXJJZCB9KTtcbiAgICAgICAgICBhd2FpdCBMb2cuY3JlYXRlKHtcbiAgICAgICAgICAgIHVzZXJJZCwgYWN0aW9uOiAnTE9HSU4nLCB0aW1lc3RhbXA6IERhdGUubm93KCksIG1ldGFkYXRhOiB7IHR5cGU6ICduZXcnIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXNzaW9uLmxhc3RBY3RpdmVBdCA9IERhdGUubm93KCk7XG4gICAgICAgICAgc2Vzc2lvbi5sb2dpbkNvdW50ID0gKHNlc3Npb24ubG9naW5Db3VudCB8fCAwKSArIDE7XG4gICAgICAgICAgYXdhaXQgc2Vzc2lvbi5zYXZlKCk7XG4gICAgICAgICAgYXdhaXQgTG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICB1c2VySWQsIGFjdGlvbjogJ1JFU1VNRScsIHRpbWVzdGFtcDogRGF0ZS5ub3coKSwgbWV0YWRhdGE6IHsgdHlwZTogJ2V4aXN0aW5nJywgY291bnQ6IHNlc3Npb24ubG9naW5Db3VudCB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHNlc3Npb24pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd1cGRhdGVfbGFuZ3VhZ2UnOiB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBsYW5ndWFnZSB9ID0gcGF5bG9hZDtcbiAgICAgICAgYXdhaXQgVXNlci5maW5kQnlJZEFuZFVwZGF0ZSh1c2VySWQsIHsgbGFuZ3VhZ2UgfSk7XG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3NhdmVfcHJvZ3Jlc3MnOiB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBxdWVzdGlvbklkLCBzZWN0aW9uLCBhbnN3ZXJUZXh0LCB0aW1lU3BlbnQsIGN1cnJlbnRJbmRleCB9ID0gcGF5bG9hZDtcblxuICAgICAgICAvLyAxLiBTYXZlIEFuc3dlclxuICAgICAgICBhd2FpdCBBbnN3ZXIuZmluZE9uZUFuZFVwZGF0ZShcbiAgICAgICAgICB7IHVzZXJJZCwgcXVlc3Rpb25JZCB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNlY3Rpb24sXG4gICAgICAgICAgICBhbnN3ZXJUZXh0LFxuICAgICAgICAgICAgJGluYzogeyB0aW1lU3BlbnQ6IHRpbWVTcGVudCB8fCAwIH0sIC8vIEFjY3VtdWxhdGUgdGltZVxuICAgICAgICAgICAgdXBkYXRlZEF0OiBEYXRlLm5vdygpXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7IHVwc2VydDogdHJ1ZSwgbmV3OiB0cnVlIH1cbiAgICAgICAgKTtcblxuICAgICAgICAvLyAyLiBVcGRhdGUgU2Vzc2lvblxuICAgICAgICBjb25zdCB1cGRhdGVPYmo6IGFueSA9IHtcbiAgICAgICAgICBjdXJyZW50SW5kZXgsXG4gICAgICAgICAgY3VycmVudFNlY3Rpb246IHNlY3Rpb24sXG4gICAgICAgICAgbGFzdEFjdGl2ZUF0OiBEYXRlLm5vdygpLFxuICAgICAgICAgICRpbmM6IHtcbiAgICAgICAgICAgIHRvdGFsVGltZVNwZW50OiB0aW1lU3BlbnQgfHwgMFxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBVc2UgJGluYyBmb3IgbmVzdGVkIHNlY3Rpb24gdGltZVxuICAgICAgICBpZiAoc2VjdGlvbikge1xuICAgICAgICAgIHVwZGF0ZU9iai4kaW5jW2BzZWN0aW9uVGltZXMuJHtzZWN0aW9ufWBdID0gdGltZVNwZW50IHx8IDA7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCBTZXNzaW9uLmZpbmRPbmVBbmRVcGRhdGUoeyB1c2VySWQgfSwgdXBkYXRlT2JqKTtcblxuICAgICAgICByZXR1cm4gcmVzLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdsb2dfZXZlbnQnOiB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkLCBldmVudCB9ID0gcGF5bG9hZDsgLy8gZXZlbnQgY291bGQgYmUgJ2JhY2t0cmFjaycgb3IgJ2JsdXInXG4gICAgICAgIGNvbnN0IGZpZWxkID0gZXZlbnQgPT09ICdiYWNrdHJhY2snID8gJ2JhY2t0cmFja0NvdW50JyA6IGV2ZW50ID09PSAnYmx1cicgPyAnYmx1ckNvdW50JyA6IG51bGw7XG4gICAgICAgIGlmIChmaWVsZCkge1xuICAgICAgICAgIGF3YWl0IFNlc3Npb24uZmluZE9uZUFuZFVwZGF0ZSh7IHVzZXJJZCB9LCB7ICRpbmM6IHsgW2ZpZWxkXTogMSB9IH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2hlYXJ0YmVhdCc6IHtcbiAgICAgICAgY29uc3QgeyB1c2VySWQgfSA9IHBheWxvYWQ7XG4gICAgICAgIGF3YWl0IFNlc3Npb24uZmluZE9uZUFuZFVwZGF0ZSh7IHVzZXJJZCB9LCB7IGxhc3RBY3RpdmVBdDogRGF0ZS5ub3coKSB9KTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHsgc3VjY2VzczogdHJ1ZSB9KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY29tcGxldGVfc2Vzc2lvbic6IHtcbiAgICAgICAgY29uc3QgeyB1c2VySWQgfSA9IHBheWxvYWQ7XG4gICAgICAgIGF3YWl0IFNlc3Npb24uZmluZE9uZUFuZFVwZGF0ZSh7IHVzZXJJZCB9LCB7IGlzQ29tcGxldGVkOiB0cnVlLCBjb21wbGV0ZWRBdDogRGF0ZS5ub3coKSB9KTtcbiAgICAgICAgYXdhaXQgTG9nLmNyZWF0ZSh7IHVzZXJJZCwgYWN0aW9uOiAnQ09NUExFVEUnLCB0aW1lc3RhbXA6IERhdGUubm93KCkgfSk7XG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIC0tLSBBZG1pbiBBY3Rpb25zIC0tLVxuXG4gICAgICBjYXNlICdhZG1pbl9zdGF0cyc6IHtcbiAgICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoe30pO1xuICAgICAgICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IFNlc3Npb24uZmluZCh7fSk7XG4gICAgICAgIGNvbnN0IGFuc3dlcnMgPSBhd2FpdCBBbnN3ZXIuZmluZCh7fSk7IC8vIE9wdGltaXphdGlvbjogY291bGQgYmUgYWdncmVzc2l2ZSBmb3IgaHVnZSBkYXRhc2V0cywgYnV0IGZpbmUgZm9yIDwxMDAgdXNlcnNcblxuICAgICAgICBjb25zdCBzdGF0cyA9IHVzZXJzLm1hcCh1ID0+IHtcbiAgICAgICAgICBjb25zdCBzZXNzID0gc2Vzc2lvbnMuZmluZChzID0+IHMudXNlcklkID09PSB1Ll9pZC50b1N0cmluZygpKTtcbiAgICAgICAgICBjb25zdCB1c2VyQW5zID0gYW5zd2Vycy5maWx0ZXIoYSA9PiBhLnVzZXJJZCA9PT0gdS5faWQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVzZXI6IHsgaWQ6IHUuX2lkLCBuYW1lOiB1Lm5hbWUsIHJvbGU6IHUucm9sZSwgbGFuZ3VhZ2U6IHUubGFuZ3VhZ2UgfSxcbiAgICAgICAgICAgIHNlc3Npb246IHNlc3MgPyBzZXNzLnRvT2JqZWN0KCkgOiBudWxsLFxuICAgICAgICAgICAgYW5zd2VyQ291bnQ6IHVzZXJBbnMubGVuZ3RoLFxuICAgICAgICAgICAgaXNPbmxpbmU6IHNlc3MgPyAoRGF0ZS5ub3coKSAtIHNlc3MubGFzdEFjdGl2ZUF0KSA8IDMwMDAwIDogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKHN0YXRzKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYWRtaW5fZ2V0X2Fuc3dlcnMnOiB7XG4gICAgICAgIGNvbnN0IHsgdXNlcklkIH0gPSBwYXlsb2FkO1xuICAgICAgICBjb25zdCBhbnN3ZXJzID0gYXdhaXQgQW5zd2VyLmZpbmQoeyB1c2VySWQgfSk7XG4gICAgICAgIHJldHVybiByZXMuanNvbihhbnN3ZXJzKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYWRtaW5fcmVzZXQnOiB7XG4gICAgICAgIGNvbnN0IHsgdGFyZ2V0VXNlcklkLCBhZG1pbklkIH0gPSBwYXlsb2FkO1xuICAgICAgICBhd2FpdCBVc2VyLmRlbGV0ZU9uZSh7IF9pZDogdGFyZ2V0VXNlcklkIH0pOyAvLyBSZXNldCB1c2VyIG1ldGFkYXRhIChsYW5ndWFnZSwgZXRjKVxuICAgICAgICBhd2FpdCBTZXNzaW9uLmRlbGV0ZU9uZSh7IHVzZXJJZDogdGFyZ2V0VXNlcklkIH0pO1xuICAgICAgICBhd2FpdCBBbnN3ZXIuZGVsZXRlTWFueSh7IHVzZXJJZDogdGFyZ2V0VXNlcklkIH0pO1xuICAgICAgICBhd2FpdCBMb2cuY3JlYXRlKHtcbiAgICAgICAgICB1c2VySWQ6IHRhcmdldFVzZXJJZCwgYWN0aW9uOiAnQURNSU5fUkVTRVQnLCB0aW1lc3RhbXA6IERhdGUubm93KCksIG1ldGFkYXRhOiB7IGJ5OiBhZG1pbklkIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2FkbWluX3Jlc2V0X3N5c3RlbSc6IHtcbiAgICAgICAgY29uc3QgeyBhZG1pbklkIH0gPSBwYXlsb2FkO1xuICAgICAgICBhd2FpdCBVc2VyLmRlbGV0ZU1hbnkoe30pOyAvLyBXaXBlIGFsbCB1c2VyIGRhdGFcbiAgICAgICAgYXdhaXQgU2Vzc2lvbi5kZWxldGVNYW55KHt9KTtcbiAgICAgICAgYXdhaXQgQW5zd2VyLmRlbGV0ZU1hbnkoe30pO1xuICAgICAgICBhd2FpdCBMb2cuZGVsZXRlTWFueSh7fSk7XG4gICAgICAgIGF3YWl0IExvZy5jcmVhdGUoe1xuICAgICAgICAgIHVzZXJJZDogJ1NZU1RFTScsIGFjdGlvbjogJ0FETUlOX1JFU0VUJywgdGltZXN0YW1wOiBEYXRlLm5vdygpLCBtZXRhZGF0YTogeyBieTogYWRtaW5JZCwgdHlwZTogJ2Z1bGwnIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2FkbWluX2V4cG9ydCc6IHtcbiAgICAgICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoe30pO1xuICAgICAgICBjb25zdCBzZXNzaW9ucyA9IGF3YWl0IFNlc3Npb24uZmluZCh7fSk7XG4gICAgICAgIGNvbnN0IGFuc3dlcnMgPSBhd2FpdCBBbnN3ZXIuZmluZCh7fSk7XG4gICAgICAgIGNvbnN0IGxvZ3MgPSBhd2FpdCBMb2cuZmluZCh7fSk7XG4gICAgICAgIHJldHVybiByZXMuanNvbih7IHVzZXJzLCBzZXNzaW9ucywgYW5zd2VycywgbG9ncyB9KTtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIGFjdGlvbicgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbImRiQ29ubmVjdCIsIlNlc3Npb24iLCJBbnN3ZXIiLCJMb2ciLCJVc2VyIiwiU0VDVVJFX1VTRVJTIiwiaWQiLCJuYW1lIiwicGluIiwicm9sZSIsImVuc3VyZVVzZXJzIiwidSIsImV4aXN0cyIsImZpbmRCeUlkIiwiY3JlYXRlIiwiX2lkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJhY3Rpb24iLCJwYXlsb2FkIiwic2VjcmV0IiwiYm9keSIsImFkbWluQWN0aW9ucyIsImluY2x1ZGVzIiwiZW52U2VjcmV0IiwicHJvY2VzcyIsImVudiIsIkFETUlOX1NFQ1JFVF9LRVkiLCJmYWxsYmFja1NlY3JldCIsImpzb24iLCJlcnJvciIsInVzZXJJZCIsInVzZXIiLCJzZXNzaW9uIiwiZmluZE9uZSIsImhhc1Byb2dyZXNzIiwiaXNDb21wbGV0ZWQiLCJjdXJyZW50SW5kZXgiLCJ0b3RhbFRpbWVTcGVudCIsInVzZXJPYmoiLCJ0b09iamVjdCIsInN1Y2Nlc3MiLCJhbnN3ZXJzIiwiZmluZCIsInRpbWVzdGFtcCIsIm5vdyIsIm1ldGFkYXRhIiwidHlwZSIsImxhc3RBY3RpdmVBdCIsImxvZ2luQ291bnQiLCJzYXZlIiwiY291bnQiLCJsYW5ndWFnZSIsImZpbmRCeUlkQW5kVXBkYXRlIiwicXVlc3Rpb25JZCIsInNlY3Rpb24iLCJhbnN3ZXJUZXh0IiwidGltZVNwZW50IiwiZmluZE9uZUFuZFVwZGF0ZSIsIiRpbmMiLCJ1cGRhdGVkQXQiLCJ1cHNlcnQiLCJuZXciLCJ1cGRhdGVPYmoiLCJjdXJyZW50U2VjdGlvbiIsImV2ZW50IiwiZmllbGQiLCJjb21wbGV0ZWRBdCIsInVzZXJzIiwic2Vzc2lvbnMiLCJzdGF0cyIsIm1hcCIsInNlc3MiLCJzIiwidG9TdHJpbmciLCJ1c2VyQW5zIiwiZmlsdGVyIiwiYSIsImFuc3dlckNvdW50IiwibGVuZ3RoIiwiaXNPbmxpbmUiLCJ0YXJnZXRVc2VySWQiLCJhZG1pbklkIiwiZGVsZXRlT25lIiwiZGVsZXRlTWFueSIsImJ5IiwibG9ncyIsImVyciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/v1.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fv1&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cv1.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();